const t=`<div :style="{ display: 'flex', flexDirection: 'column', gap: '24px', }"> <blur-elysium-slide-search :selected-slides-ids="selectedSlidesIds" @slide-selected="selectSlide" /> <div v-if="selectedSlides.length > 0" class="blur-elysium-slide-selection-results"> <div class="blur-elysium-slide-selection-results-list" ref="selectionList" @drop="onDrop($event)" @dragend="dragEnd($event)" @dragover.prevent @dragenter.prevent> <blur-elysium-slide-selection-item v-for="slide in selectedSlides" :key="slide.id" :slide="slide" draggable @slide-loaded="slideLoaded" @start-drag="startDrag" @enter-drag="onDrag" @position-up="slidePositionUp" @position-down="slidePositionDown" @edit-slide="slideEdit" @remove-slide="slideRemove"/> </div> </div> <div v-if="isLoading && selectedSlidesIds.length > 0" :style="{ display: 'flex', flexDirection: 'column', gap: '30px', }"> <div v-for="placholder in selectedSlidesIds.length" :key="placholder" :style="{ minHeight: '114px', position: 'relative', borderRadius: '10px', overflow: 'hidden', }"> <mt-loader size="24px"/> </div> </div> <mt-banner v-if="selectedSlidesIds.length === 0" variant="info"> <span v-html="$tc('blurElysiumSlides.slideSelection.listNoSelection')" /> </mt-banner> </div>`,{Component:l,Data:r,Context:n}=Shopware,{Criteria:o}=r,a=l.wrapComponentConfig({template:t,inject:["repositoryFactory"],props:{selectedSlidesIds:{type:Array,required:!0}},data(){return{isLoading:!0,selectedSlides:{},currentDragIndex:0,draggedSlide:null,draggedSlideElement:null,placeholderElement:document.createElement("div")}},watch:{selectedSlides:{handler(){this.selectedSlidesIds.length=0,this.selectedSlidesIds.push(...this.selectedSlides.map(e=>e.id))},deep:!1}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")}},mounted(){this.placeholderElement.style.borderRadius="12px",this.placeholderElement.style.backgroundColor="#eeeeee"},methods:{initSlides(){const e=new o;e.setIds(this.selectedSlidesIds),this.slidesRepository.search(e,n.api).then(s=>{const i=s.filter(d=>this.selectedSlidesIds.includes(d.id));this.selectedSlides=i,i.length<=0&&(this.selectedSlidesIds.length=0),this.isLoading=!1}).catch(s=>{console.error("Error loading slides",s)})},selectSlide(e){switch(this.selectedSlidesIds.indexOf(e.id),this.selectedSlidesIds.includes(e.id)){case!0:this.selectedSlides.remove(e.id);break;default:this.selectedSlides.add(e);break}},onDrop(){this.selectedSlides.moveItem(this.selectedSlides.indexOf(this.draggedSlide),this.currentDragIndex),this.draggedSlideElement.classList.remove("is-dragged"),this.placeholderElement.remove()},dragEnd(e){e.target.classList.remove("is-dragged"),this.placeholderElement.remove()},startDrag(e,s,i){this.draggedSlide=e,this.draggedSlideElement=i,this.placeholderElement.style.height=`${i.offsetHeight}px`},onDrag(e,s,i){this.draggedSlide===e&&this.draggedSlideElement.classList.add("is-dragged"),this.currentDragIndex!==this.selectedSlides.indexOf(e)?i.before(this.placeholderElement):i.after(this.placeholderElement),this.currentDragIndex=this.selectedSlides.indexOf(e)},slidePositionUp(e){const s=this.selectedSlides.indexOf(e);s>0&&this.selectedSlides.moveItem(s,s-1)},slidePositionDown(e){const s=this.selectedSlides.indexOf(e);s<this.selectedSlides.length-1&&this.selectedSlides.moveItem(s,s+1)},slideRemove(e){this.selectedSlides.remove(e.id)},slideEdit(e){const s=this.$router.resolve({name:"blur.elysium.slides.detail",params:{id:e.id}});window.open(s.href,"_blank")},onCreateSlide(){const e=this.$router.resolve({name:"blur.elysium.slides.create"});window.open(e.href,"_blank")},onSlideOverview(){const e=this.$router.resolve({name:"blur.elysium.slides.overview"});window.open(e.href,"_blank")}},created(){this.initSlides()}});export{a as default};
//# sourceMappingURL=index-p_d6XG9_.js.map
