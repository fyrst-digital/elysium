{"version":3,"file":"index-riF5AEci.js","sources":["../../../app/administration/src/component/slides/overview/template.html.twig","../../../app/administration/src/component/slides/overview/index.ts"],"sourcesContent":["<sw-page>\n    <template #search-bar>\n        <sw-search-bar\n            initial-search-type=\"blur_elysium_slides\"\n            :initial-search=\"searchTerm\"\n            @search=\"onSearch\"\n        />\n    </template>\n\n    <template #smart-bar-header>\n        <div :style=\"styles.moduleHeading\">\n            <blur-elysium-slides-icon :color=\"module.color\"/>\n            <h2>\n                {{ $t('blurElysiumSlides.slideOverviewLabel') }}\n                <span\n                    :style=\"{\n                        fontWeight: 'normal'\n                    }\"\n                >\n                    ({{ total }})\n                </span>\n            </h2>\n        </div>\n    </template>\n\n    <template #language-switch>\n        <sw-language-switch @on-change=\"onChangeLanguage\"/>\n    </template>\n\n    <template #smart-bar-actions>\n        <mt-button\n            variant=\"primary\"\n            size=\"default\"\n            :disabled=\"!permissionCreate\"\n            @click=\"$router.push({ name: 'blur.elysium.slides.create' })\"\n        >\n            {{ $tc('blurElysium.action.createSlide') }}\n        </mt-button>\n    </template>\n\n    <template #content>\n        <sw-entity-listing\n            v-if=\"total > 0\"\n            :items=\"slidesCollection\"\n            :repository=\"slidesRepository\"\n            :columns=\"slidesColumns\"\n            :is-loading=\"isLoading\"\n            :sort-by=\"sortBy\"\n            :sort-direction=\"sortDirection\"\n            :allow-delete=\"permissionDelete\"\n            @column-sort=\"columnSort\"\n            @delete-item-finish=\"finishDeleteItems\"\n            @items-delete-finish=\"finishDeleteItems\"\n        >\n            <template #more-actions=\"{ item }\">\n                <sw-context-menu-item\n                    :disabled=\"!permissionCreate\"\n                    @click=\"copySlide(item)\"\n                >\n                    {{ $tc('blurElysiumSlides.actions.copySlide') }}\n                </sw-context-menu-item>\n                <sw-context-menu-item\n                    :disabled=\"!permissionView\"\n                    :router-link=\"permissionView === true ? { name: 'blur.elysium.slides.detail', params: { id: item.id }} : null\"\n                >\n                    {{ $tc('blurElysiumSlides.actions.editSlide') }}\n                </sw-context-menu-item>\n            </template>\n        </sw-entity-listing>\n        <template v-if=\"isLoading === false && total === 0\">\n            <sw-empty-state\n                :title=\"$tc('blurElysiumSlides.emptySlidesTitle')\"\n                :subline=\"$tc('blurElysiumSlides.emptySlidesSubline')\"\n                :auto-height=\"true\"\n                :style=\"{\n                    minHeight: '50vh',\n                    padding: '40px 20px'\n                }\"\n            >\n                <template #icon>\n                    <img\n                        :src=\"assetFilter('/administration/administration/static/img/empty-states/media-empty-state.svg')\"\n                        :alt=\"$tc('blurElysiumSlides.emptySlidesTitle')\"\n                    />\n                </template>\n\n                <template #actions>\n                    <mt-button\n                        variant=\"secondary\"\n                        size=\"default\"\n                        @click=\"$router.push({ name: 'blur.elysium.slides.create' })\"\n                    >\n                        {{ $tc('blurElysium.action.createSlide') }}\n                    </mt-button>\n                </template>\n            </sw-empty-state>\n        </template>\n    </template>\n</sw-page>","import { module } from '@elysium/meta';\nimport template from './template.html.twig';\nimport EntityCollection from 'shopware/core/data/entity-collection.data';\n\nconst { Component, Mixin, Data, State, Filter, Context, Store } = Shopware;\nconst { Criteria } = Data;\n\ntype SortDirection = 'ASC' | 'DESC';\n\ninterface Data {\n    slidesCollection: EntityCollection<'blur_elysium_slides'>;\n    slidesColumns: object[];\n    isLoading: boolean;\n    searchTerm: string;\n    sortBy: string;\n    sortDirection: SortDirection;\n    total: number | null;\n    styles: object;\n}\n\nexport default Component.wrapComponentConfig({\n    template,\n\n    inject: ['repositoryFactory', 'acl'],\n\n    setup() {\n        return {\n            module,\n        };\n    },\n\n    data() {\n        return <Data>{\n            slidesCollection: {},\n            slidesColumns: [\n                {\n                    property: 'name',\n                    dataIndex: 'name',\n                    inlineEdit: 'string',\n                    label: 'blurElysiumSlides.grid.nameLabel',\n                    routerLink: 'blur.elysium.slides.detail',\n                    width: '250px',\n                    allowResize: true,\n                    primary: true,\n                    useCustomSort: true,\n                    naturalSorting: true,\n                },\n                {\n                    property: 'title',\n                    dataIndex: 'title',\n                    inlineEdit: 'string',\n                    label: 'blurElysiumSlides.grid.headlineLabel',\n                    routerLink: 'blur.elysium.slides.detail',\n                    width: '1fr',\n                    allowResize: true,\n                    sortable: false,\n                    primary: false,\n                    useCustomSort: false,\n                    naturalSorting: false,\n                },\n            ],\n            isLoading: true,\n            searchTerm: this.$route.query?.term ? this.$route.query.term : '',\n            sortBy: 'createdAt',\n            sortDirection: 'DESC',\n            styles: {\n                moduleHeading: <CSSStyleDeclaration>{\n                    display: 'flex',\n                    gap: '16px',\n                    alignItems: 'center',\n                },\n            },\n        };\n    },\n\n    mixins: [Mixin.getByName('notification'), Mixin.getByName('listing')],\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    watch: {\n        searchTerm: {\n            handler() {\n                this.loadSlides();\n            },\n        },\n    },\n\n    computed: {\n        slidesRepository() {\n            return this.repositoryFactory.create('blur_elysium_slides');\n        },\n\n        defaultCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n\n            criteria.setTerm(this.searchTerm);\n\n            criteria.addSorting(\n                Criteria.sort(this.sortBy, this.sortDirection, true)\n            );\n\n            return criteria;\n        },\n\n        permissionView() {\n            return this.acl.can('blur_elysium_slides.viewer');\n        },\n\n        permissionCreate() {\n            return this.acl.can('blur_elysium_slides.creator');\n        },\n\n        permissionEdit() {\n            return this.acl.can('blur_elysium_slides.editor');\n        },\n\n        permissionDelete() {\n            return this.acl.can('blur_elysium_slides.deleter');\n        },\n\n        assetFilter() {\n            return Filter.getByName('asset');\n        },\n    },\n\n    methods: {\n        loadSlides() {\n            this.isLoading = true;\n\n            this.slidesRepository\n                .search(this.defaultCriteria, Context.api)\n                .then((result) => {\n                    this.slidesCollection = result;\n                    this.total =\n                        typeof result.total === 'number' ? result.total : 0;\n                    this.isLoading = false;\n                })\n                .catch((error) => {\n                    console.error(error);\n                    this.isLoading = false;\n                });\n        },\n\n        onSearch(searchTerm: string) {\n            this.searchTerm = searchTerm;\n        },\n\n        onChangeLanguage(languageId: string) {\n            State.commit('context/setApiLanguageId', languageId);\n            this.isLoading = true;\n            this.loadSlides();\n        },\n\n        columnSort() {\n            this.loadSlides();\n        },\n\n        copySlide(slide) {\n            if (this.permissionCreate !== true) {\n                return;\n            }\n\n            this.isLoading = true;\n\n            const cloneOptions = {\n                overwrites: {\n                    name: `${slide.name}-${this.$tc('blurElysium.general.copySuffix')}`,\n                },\n            };\n\n            this.slidesRepository\n                .clone(slide.id, cloneOptions)\n                .then(() => {\n                    this.loadSlides();\n                })\n                .catch((error) => {\n                    console.warn(error);\n                    this.isLoading = false;\n                });\n        },\n\n        finishDeleteItems() {\n            this.createNotificationSuccess({\n                message: this.$tc(\n                    'blurElysiumSlides.messages.slideDeleteSucces'\n                ),\n            });\n            this.isLoading = false;\n            this.loadSlides();\n        },\n    },\n\n    created() {\n        this.loadSlides();\n    },\n});\n"],"names":["template","Component","Mixin","Data","State","Filter","Context","Store","Criteria","index","module","_a","criteria","result","error","searchTerm","languageId","slide","cloneOptions"],"mappings":"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"}