{"version":3,"file":"index-Bd3Ur3Hm.js","sources":["../../../../../../../../custom/static-plugins/BlurElysiumSlider/src/Resources/app/administration/src/component/slides/form/cover/template.html.twig","../../../../../../../../custom/static-plugins/BlurElysiumSlider/src/Resources/app/administration/src/component/slides/form/cover/index.ts"],"sourcesContent":["<mt-card\n    position-identifier=\"blurElysium.slide.form.cover\"\n    :title=\"$tc('blurElysiumSlides.forms.slideCover.label')\"\n    :class=\"['content-no-padding']\"\n>\n    <template #headerRight>\n        <blur-device-switch\n            layout=\"row\"\n            show-label=\"false\"\n            :default-viewport=\"device\"\n            :style=\"{\n                padding: '0',\n                width: '100%',\n                justifyContent: 'center',\n                '--container-gap': '12px',\n                '--icon-padding': '6px',\n                '--icon-bg-color': '#ffffff',\n                '--icon-hover-bg-color': 'var(--color-gray-100)',\n            }\"\n            :device=\"device\"\n            @change-device=\"device => elysiumUI.setDevice(device)\"\n        />\n    </template>\n\n    <template #tabs>\n        <mt-tabs\n            :defaultItem=\"activeTab\"\n            :items=\"tabs\"\n            @new-item-active=\"activeTab = $event\"\n        />\n    </template>\n    <blur-section>\n        <blur-column\n            padding\n            :cols-tablet=\"6\"\n            :cols-desktop=\"8\"\n            :style=\"viewStyle({\n                mobile:  { position: 'relative' },\n                desktop: { borderRight: '1px solid var(--color-border-primary-default)' }\n            })\"\n        >\n            <mt-loader v-if=\"mediaLoading\"/>\n\n            <template v-if=\"activeTab === 'coverImage'\">\n                <blur-section\n                    gap-y\n                    :description=\"$tc('blurElysiumSlides.forms.slideCoverImage.description')\"\n                >\n                    <blur-column>\n                        <sw-upload-listener\n                            :upload-tag=\"slideCoverUploadTag\"\n                            auto-upload\n                            @media-upload-finish=\"setSlideCover\"\n                        />\n                        <sw-media-upload-v2\n                            variant=\"regular\"\n                            label=\"Medium\"\n                            :disabled=\"!(permissionCreate || permissionEdit)\"\n                            file-accept=\"image/*\"\n                            :upload-tag=\"slideCoverUploadTag\"\n                            :source=\"slideCover\"\n                            :allow-multi-select=\"false\"\n                            :default-folder=\"'blur_elysium_slides'\"\n                            @media-upload-remove-image=\"removeSlideCover\"\n                            @media-upload-sidebar-open=\"openMediaModal\"\n                        />\n                    </blur-column>\n                </blur-section>\n            </template>\n\n            <template v-if=\"activeTab === 'coverVideo'\">\n                <blur-section\n                    gap-y\n                    :description=\"$tc('blurElysiumSlides.forms.slideCoverVideo.description')\"\n                >\n                    <blur-column>\n                        <sw-upload-listener\n                            upload-tag=\"blur-elysium-slide-cover-video\"\n                            auto-upload\n                            @media-upload-finish=\"payload => setSlideCover(payload, true)\"\n                        />\n                        <sw-media-upload-v2\n                            ref=\"coverVideoUploadElement\"\n                            variant=\"regular\"\n                            label=\"Medium\"\n                            :disabled=\"!(permissionCreate || permissionEdit)\"\n                            file-accept=\"video/*\"\n                            upload-tag=\"blur-elysium-slide-cover-video\"\n                            :source=\"slideCoverVideo\"\n                            :allow-multi-select=\"false\"\n                            :default-folder=\"'blur_elysium_slides'\"\n                            @media-upload-remove-image=\"removeSlideCover(true)\"\n                            @media-upload-sidebar-open=\"openMediaModal('slideCoverVideo')\"\n                        />\n                    </blur-column>\n                </blur-section>\n            </template>\n\n            <template v-if=\"activeTab === 'coverMeta'\">\n                <blur-section\n                    gap\n                    :description=\"$tc('blurElysiumSlides.forms.slideCoverMeta.description')\"\n                >\n                    <blur-column\n                        :cols-tablet=\"6\">\n\n                        <blur-text-input\n                            v-model=\"slide.contentSettings.slideCover.alt\"\n                            :label=\"$tc('blurElysiumSlides.forms.slideCoverMeta.alt.label')\"\n                        />\n\n                    </blur-column>\n\n                    <blur-column\n                        :cols-tablet=\"6\">\n\n                        <blur-text-input\n                            v-model=\"slide.contentSettings.slideCover.title\"\n                            :label=\"$tc('blurElysiumSlides.forms.slideCoverMeta.title.label')\"\n                        />\n                    </blur-column>\n                </blur-section>\n            </template>\n        </blur-column>\n\n        <blur-column\n            v-if=\"activeTab !== 'coverMeta'\"\n            padding\n            :cols-tablet=\"6\"\n            :cols-desktop=\"4\"\n        >\n            <blur-section gap-y>\n                <blur-column>\n                    <blur-select-input\n                        :label=\"$tc('blurElysium.general.objectPosY')\"\n                        :placeholder=\"viewportsPlaceholder('coverMedia.objectPosY', 'center', 'blurElysium.general')\"\n                        :device=\"device\"\n                        :show-device=\"true\"\n                        :options=\"[\n                            { value: 'top', label: $tc('blurElysium.general.top') },\n                            { value: 'center', label: $tc('blurElysium.general.center') },\n                            { value: 'bottom', label: $tc('blurElysium.general.bottom') }\n                        ]\"\n                        @on-device=\"deviceSwitch\"\n                        v-model:value=\"slideViewportSettings.coverMedia.objectPosY\"\n                    />\n                </blur-column>\n                <blur-column>\n                    <blur-select-input\n                        :label=\"$tc('blurElysium.general.objectPosX')\"\n                        :placeholder=\"viewportsPlaceholder('coverMedia.objectPosX', 'center', 'blurElysium.general')\"\n                        :device=\"device\"\n                        :show-device=\"true\"\n                        :options=\"[\n                            { value: 'left', label: $tc('blurElysium.general.left') },\n                            { value: 'center', label: $tc('blurElysium.general.center') },\n                            { value: 'right', label: $tc('blurElysium.general.right') }\n                        ]\"\n                        @on-device=\"deviceSwitch\"\n                        v-model:value=\"slideViewportSettings.coverMedia.objectPosX\"\n                    />\n                </blur-column>\n                <blur-column>\n                    <blur-select-input\n                        :label=\"$tc('blurElysium.general.objectFit')\"\n                        :placeholder=\"viewportsPlaceholder('coverMedia.objectFit', 'cover', 'blurElysium.general')\"\n                        :device=\"device\"\n                        :show-device=\"true\"\n                        :options=\"[\n                            { value: 'cover', label: $tc('blurElysium.general.cover') },\n                            { value: 'contain', label: $tc('blurElysium.general.contain') },\n                            { value: 'auto', label: $tc('blurElysium.general.auto') }\n                        ]\"\n                        @on-device=\"deviceSwitch\"\n                        v-model:value=\"slideViewportSettings.coverMedia.objectFit\"\n                    />\n                </blur-column>\n            </blur-section>\n        </blur-column>\n    </blur-section>\n    <sw-media-modal-v2\n        v-if=\"mediaModal.open\"\n        :allow-multi-select=\"false\"\n        entity-context=\"blur_elysium_slides\"\n        @media-modal-selection-change=\"onAddMediaModal\"\n        @modal-close=\"closeMediaModal\"\n    />\n</mt-card>","import slide from '../slide';\nimport template from './template.html.twig';\n\nconst { Component, Mixin, Store, Context } = Shopware;\n\nexport default Component.wrapComponentConfig({\n    template,\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('blur-device-utilities'),\n        Mixin.getByName('blur-style-utilities'),\n    ],\n\n    inject: ['repositoryFactory', 'acl'],\n\n    data() {\n        return {\n            activeTab: 'coverImage',\n            slideCoverMapping: {\n                mobile: 'slideCoverMobile',\n                tablet: 'slideCoverTablet',\n                desktop: 'slideCover',\n            },\n            mediaLoading: false,\n            mediaModal: {\n                open: false,\n                type: null,\n            },\n        };\n    },\n\n    computed: {\n        elysiumUI() {\n            return Store.get('elysiumUI');\n        },\n\n        slide() {\n            return Store.get('elysiumSlide').slide;\n        },\n\n        device() {\n            return this.elysiumUI.device;\n        },\n\n        mediaSidebar() {\n            return this.elysiumUI.mediaSidebar;\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        slideViewportSettings() {\n            return this.slide.slideSettings.viewports[this.device];\n        },\n\n        tabs() {\n            return [\n                {\n                    label: this.$tc(\n                        'blurElysiumSlides.forms.slideCoverImage.label'\n                    ),\n                    name: 'coverImage',\n                },\n                {\n                    label: this.$tc(\n                        'blurElysiumSlides.forms.slideCoverVideo.label'\n                    ),\n                    name: 'coverVideo',\n                },\n                {\n                    label: this.$tc(\n                        'blurElysiumSlides.forms.slideCoverMeta.label'\n                    ),\n                    name: 'coverMeta',\n                },\n            ];\n        },\n\n        slideCoverUploadTag() {\n            const uploadTag = {\n                mobile: 'blur-elysium-slide-cover-mobile',\n                tablet: 'blur-elysium-slide-cover-tablet',\n                desktop: 'blur-elysium-slide-cover',\n            };\n\n            return uploadTag[this.device];\n        },\n\n        slideCover() {\n            return this.slide[this.slideCoverMapping[this.device]] ?? null;\n        },\n\n        slideCoverProp() {\n            return this.slideCoverMapping[this.device];\n        },\n\n        slideCoverVideo() {\n            return this.slide.slideCoverVideo ?? null;\n        },\n\n        coverVideoUploadElement() {\n            return this.$refs.coverVideoUpload ?? null;\n        },\n\n        permissionView() {\n            return this.acl.can('blur_elysium_slides.viewer');\n        },\n\n        permissionCreate() {\n            return this.acl.can('blur_elysium_slides.creator');\n        },\n\n        permissionEdit() {\n            return this.acl.can('blur_elysium_slides.editor');\n        },\n\n        permissionDelete() {\n            return this.acl.can('blur_elysium_slides.deleter');\n        },\n    },\n\n    methods: {\n        setSlideCover(media: any, isVideo: boolean = false) {\n            this.mediaLoading = true;\n\n            let mediaId = media.id || media.targetId || null;\n            let mediaProp =\n                isVideo === true ? 'slideCoverVideo' : this.slideCoverProp;\n\n            if (mediaId === null) {\n                // throw error message because mediaId is null\n                console.error(\n                    'mediaId is null. Slide cover media can not be set.'\n                );\n                this.mediaLoading = false;\n            } else {\n                // mediaId is provided handle media assignment\n                this.slide[`${mediaProp}Id`] = mediaId;\n\n                if (media.path) {\n                    // The media already exists in the system no need to fetch it. Use the already existing media object\n                    this.slide[mediaProp] = media;\n                    this.mediaLoading = false;\n                } else {\n                    // The media does not exist in the system. Fetch the media object from media repository\n                    this.mediaRepository\n                        .get(mediaId, Context.api)\n                        .then((media) => {\n                            this.slide[mediaProp] = media;\n                            this.mediaLoading = false;\n                        })\n                        .catch((exception) => {\n                            console.error(exception);\n                            this.mediaLoading = false;\n                        });\n                }\n            }\n        },\n\n        removeSlideCover(isVideo: boolean = false) {\n            console.log('Removing slide cover...');\n            let mediaProp =\n                isVideo === true ? 'slideCoverVideo' : this.slideCoverProp;\n            this.slide[`${mediaProp}Id`] = null;\n            this.slide[mediaProp] = null;\n        },\n\n        openMediaModal(type: string = 'slideCover') {\n            this.mediaModal.open = true;\n            this.mediaModal.type = type;\n        },\n\n        closeMediaModal() {\n            this.mediaModal.open = false;\n            this.mediaModal.type = null;\n        },\n\n        onAddMediaModal(payload) {\n            if (payload.length > 0) {\n                if (this.mediaModal.type === 'slideCover') {\n                    this.setSlideCover(payload[0]);\n                } else if (this.mediaModal.type === 'slideCoverVideo') {\n                    this.setSlideCover(payload[0], true);\n                }\n            }\n        },\n    },\n\n    created() {\n        this.viewportsSettings = this.slide.slideSettings.viewports;\n    },\n});\n"],"names":["template","Component","Mixin","Store","Context","index","media","isVideo","mediaId","mediaProp","exception","type","payload"],"mappings":"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"}