import{m as r}from"./blur-elysium-slider-C_ml9TdA.js";const a=`<sw-page> <template #search-bar> <sw-search-bar initial-search-type="blur_elysium_slides" :initial-search="searchTerm" @search="onSearch" /> </template> <template #smart-bar-header> <div :style="styles.moduleHeading"> <blur-elysium-slides-icon :color="module.color"/> <h2> {{ $t('blurElysiumSlides.slideOverviewLabel') }} <span :style="{ fontWeight: 'normal' }" > ({{ total }}) </span> </h2> </div> </template> <template #language-switch> <sw-language-switch @on-change="onChangeLanguage"/> </template> <template #smart-bar-actions> <mt-button variant="primary" size="default" :disabled="!permissionCreate" @click="$router.push({ name: 'blur.elysium.slides.create' })" > {{ $tc('blurElysium.action.createSlide') }} </mt-button> </template> <template #content> <sw-entity-listing v-if="total > 0" :items="slidesCollection" :repository="slidesRepository" :columns="slidesColumns" :is-loading="isLoading" :sort-by="currentSortBy" :sort-direction="sortDirection" :natural-sorting="naturalSorting" :allow-delete="permissionDelete" @column-sort="onColumnSort" @delete-item-finish="finishDeleteItems" @items-delete-finish="finishDeleteItems" > <template #more-actions="{ item }"> <sw-context-menu-item :disabled="!permissionCreate" @click="copySlide(item)" > {{ $tc('blurElysiumSlides.actions.copySlide') }} </sw-context-menu-item> <sw-context-menu-item :disabled="!permissionView" :router-link="permissionView === true ? { name: 'blur.elysium.slides.detail', params: { id: item.id }} : null" > {{ $tc('blurElysiumSlides.actions.editSlide') }} </sw-context-menu-item> </template> </sw-entity-listing> <template v-if="isLoading === false && total === 0"> <sw-empty-state :title="$tc('blurElysiumSlides.emptySlidesTitle')" :subline="$tc('blurElysiumSlides.emptySlidesSubline')" :auto-height="true" :style="{ minHeight: '50vh', padding: '40px 20px' }" > <template #icon> <img :src="assetFilter('/administration/administration/static/img/empty-states/media-empty-state.svg')" :alt="$tc('blurElysiumSlides.emptySlidesTitle')" /> </template> <template #actions> <mt-button variant="secondary" size="default" @click="$router.push({ name: 'blur.elysium.slides.create' })" > {{ $tc('blurElysium.action.createSlide') }} </mt-button> </template> </sw-empty-state> </template> </template> </sw-page>`,{Component:n,Mixin:t,Data:o,Filter:m,Context:u,Store:c}=Shopware,{Criteria:i}=o,h=n.wrapComponentConfig({template:a,inject:["repositoryFactory","acl"],setup(){return{module:r}},data(){var e;return{slidesCollection:{},slidesColumns:[{property:"name",inlineEdit:"string",label:"blurElysiumSlides.grid.nameLabel",routerLink:"blur.elysium.slides.detail",width:"250px",allowResize:!0,primary:!0},{property:"title",inlineEdit:"string",label:"blurElysiumSlides.grid.headlineLabel",routerLink:"blur.elysium.slides.detail",width:"1fr",allowResize:!0}],isLoading:!0,searchTerm:(e=this.$route.query)!=null&&e.term?this.$route.query.term:"",sortBy:"createdAt",sortDirection:"DESC",styles:{moduleHeading:{display:"flex",gap:"16px",alignItems:"center"}}}},mixins:[t.getByName("notification"),t.getByName("listing")],metaInfo(){return{title:this.$createTitle()}},watch:{searchTerm:{handler(){this.getList()}}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")},defaultCriteria(){const e=new i(this.page,this.limit);return e.setTerm(this.searchTerm),e.addSorting(i.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e},permissionView(){return this.acl.can("blur_elysium_slides.viewer")},permissionCreate(){return this.acl.can("blur_elysium_slides.creator")},permissionEdit(){return this.acl.can("blur_elysium_slides.editor")},permissionDelete(){return this.acl.can("blur_elysium_slides.deleter")},assetFilter(){return m.getByName("asset")}},methods:{getList(){this.isLoading=!0,this.slidesRepository.search(this.defaultCriteria,u.api).then(e=>{this.slidesCollection=e,this.total=typeof e.total=="number"?e.total:0,this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1})},onSearch(e){this.searchTerm=e},onChangeLanguage(e){c.get("context").setApiLanguageId(e),this.isLoading=!0,this.getList()},onColumnSort(e){this.onSortColumn(e)},copySlide(e){if(this.permissionCreate!==!0)return;this.isLoading=!0;const s={overwrites:{name:`${e.name}-${this.$tc("blurElysium.general.copySuffix")}`}};this.slidesRepository.clone(e.id,s).then(()=>{this.getList()}).catch(l=>{console.warn(l),this.isLoading=!1})},finishDeleteItems(){this.createNotificationSuccess({message:this.$tc("blurElysiumSlides.messages.slideDeleteSucces")}),this.isLoading=!1,this.getList()}},created(){this.getList()}});export{h as default};
//# sourceMappingURL=index-C7Iwj5dR.js.map
