const a=`<mt-card position-identifier="blurElysium.slide.form.cover" :title="$tc('blurElysiumSlides.forms.slideCover.label')" :class="['content-no-padding']"> <template #headerRight> <blur-device-switch layout="row" show-label="false" :default-viewport="device" :style="{ padding: '0', width: '100%', justifyContent: 'center', '--container-gap': '12px', '--icon-padding': '6px', '--icon-bg-color': '#ffffff', '--icon-hover-bg-color': 'var(--color-gray-100)', }" :device="device" @change-device="device => elysiumUI.setDevice(device)" /> </template> <template #tabs> <mt-tabs :defaultItem="activeTab" :items="tabs" @new-item-active="activeTab = $event" /> </template> <blur-section> <blur-column padding :cols-tablet="6" :cols-desktop="8" :style="viewStyle({ mobile: { position: 'relative' }, desktop: { borderRight: '1px solid var(--color-border-primary-default)' } })"> <mt-loader v-if="mediaLoading" /> <template v-if="activeTab === 'coverImage'"> <blur-section gap-y :description="$tc('blurElysiumSlides.forms.slideCoverImage.description')"> <blur-column> <sw-upload-listener :upload-tag="slideCoverUploadTag" auto-upload @media-upload-finish="setSlideCover" /> <sw-media-upload-v2 variant="regular" label="Medium" :disabled="!(permissionCreate || permissionEdit)" file-accept="image/*" :upload-tag="slideCoverUploadTag" :source="slideCover" :allow-multi-select="false" :default-folder="'blur_elysium_slides'" @media-upload-remove-image="removeSlideCover" @media-upload-sidebar-open="openMediaModal" /> </blur-column> </blur-section> </template> <template v-if="activeTab === 'coverVideo'"> <blur-section gap-y :description="$tc('blurElysiumSlides.forms.slideCoverVideo.description')" > <blur-column> <sw-upload-listener upload-tag="blur-elysium-slide-cover-video" auto-upload @media-upload-finish="payload => setSlideCover(payload, true)" /> <sw-media-upload-v2 ref="coverVideoUploadElement" variant="regular" label="Medium" :disabled="!(permissionCreate || permissionEdit)" file-accept="video/*" upload-tag="blur-elysium-slide-cover-video" :source="slideCoverVideo" :allow-multi-select="false" :default-folder="'blur_elysium_slides'" @media-upload-remove-image="removeSlideCover(true)" @media-upload-sidebar-open="openMediaModal('slideCoverVideo')" /> </blur-column> </blur-section> </template> </blur-column> <blur-column padding :cols-tablet="6" :cols-desktop="4"> <blur-section gap-y> <blur-column> <blur-select-input :label="$tc('blurElysium.general.objectPosY')" :placeholder="viewportsPlaceholder('coverMedia.objectPosY', 'center', 'blurElysium.general')" :device="device" :show-device="true" :options="[ { value: 'top', label: $tc('blurElysium.general.top') }, { value: 'center', label: $tc('blurElysium.general.center') }, { value: 'bottom', label: $tc('blurElysium.general.bottom') } ]" @on-device="deviceSwitch" v-model:value="slideViewportSettings.coverMedia.objectPosY" /> </blur-column> <blur-column> <blur-select-input :label="$tc('blurElysium.general.objectPosX')" :placeholder="viewportsPlaceholder('coverMedia.objectPosX', 'center', 'blurElysium.general')" :device="device" :show-device="true" :options="[ { value: 'left', label: $tc('blurElysium.general.left') }, { value: 'center', label: $tc('blurElysium.general.center') }, { value: 'right', label: $tc('blurElysium.general.right') } ]" @on-device="deviceSwitch" v-model:value="slideViewportSettings.coverMedia.objectPosX" /> </blur-column> <blur-column> <blur-select-input :label="$tc('blurElysium.general.objectFit')" :placeholder="viewportsPlaceholder('coverMedia.objectFit', 'cover', 'blurElysium.general')" :device="device" :show-device="true" :options="[ { value: 'cover', label: $tc('blurElysium.general.cover') }, { value: 'contain', label: $tc('blurElysium.general.contain') }, { value: 'auto', label: $tc('blurElysium.general.auto') } ]" @on-device="deviceSwitch" v-model:value="slideViewportSettings.coverMedia.objectFit" /> </blur-column> </blur-section> </blur-column> </blur-section> <sw-media-modal-v2 v-if="mediaModal.open" :allow-multi-select="false" entity-context="blur_elysium_slides" @media-modal-selection-change="onAddMediaModal" @modal-close="closeMediaModal" /> </mt-card>`,{Component:d,Mixin:r,Store:s,Context:u}=Shopware,c=d.wrapComponentConfig({template:a,mixins:[r.getByName("notification"),r.getByName("blur-device-utilities"),r.getByName("blur-style-utilities")],inject:["repositoryFactory","acl"],data(){return{activeTab:"coverImage",slideCoverMapping:{mobile:"slideCoverMobile",tablet:"slideCoverTablet",desktop:"slideCover"},mediaLoading:!1,mediaModal:{open:!1,type:null}}},computed:{elysiumUI(){return s.get("elysiumUI")},slide(){return s.get("elysiumSlide").slide},device(){return this.elysiumUI.device},mediaSidebar(){return this.elysiumUI.mediaSidebar},mediaRepository(){return this.repositoryFactory.create("media")},slideViewportSettings(){return this.slide.slideSettings.viewports[this.device]},tabs(){return[{label:this.$tc("blurElysiumSlides.forms.slideCoverImage.label"),name:"coverImage"},{label:this.$tc("blurElysiumSlides.forms.slideCoverVideo.label"),name:"coverVideo"}]},slideCoverUploadTag(){return{mobile:"blur-elysium-slide-cover-mobile",tablet:"blur-elysium-slide-cover-tablet",desktop:"blur-elysium-slide-cover"}[this.device]},slideCover(){return this.slide[this.slideCoverMapping[this.device]]??null},slideCoverProp(){return this.slideCoverMapping[this.device]},slideCoverVideo(){return this.slide.slideCoverVideo??null},coverVideoUploadElement(){return this.$refs.coverVideoUpload??null},permissionView(){return this.acl.can("blur_elysium_slides.viewer")},permissionCreate(){return this.acl.can("blur_elysium_slides.creator")},permissionEdit(){return this.acl.can("blur_elysium_slides.editor")},permissionDelete(){return this.acl.can("blur_elysium_slides.deleter")}},methods:{setSlideCover(e,l=!1){this.mediaLoading=!0;let i=e.id||e.targetId||null,t=l===!0?"slideCoverVideo":this.slideCoverProp;i===null?(console.error("mediaId is null. Slide cover media can not be set."),this.mediaLoading=!1):(this.slide[`${t}Id`]=i,e.path?(this.slide[t]=e,this.mediaLoading=!1):this.mediaRepository.get(i,u.api).then(o=>{this.slide[t]=o,this.mediaLoading=!1}).catch(o=>{console.error(o),this.mediaLoading=!1}))},removeSlideCover(e=!1){let l=e===!0?"slideCoverVideo":this.slideCoverProp;this.slide[`${l}Id`]=null,this.slide[l]=null},openMediaModal(e="slideCover"){this.mediaModal.open=!0,this.mediaModal.type=e},closeMediaModal(){this.mediaModal.open=!1,this.mediaModal.type=null},onAddMediaModal(e){e.length>0&&(this.mediaModal.type==="slideCover"?this.setSlideCover(e[0]):this.mediaModal.type==="slideCoverVideo"&&this.setSlideCover(e[0],!0))}},created(){this.viewportsSettings=this.slide.slideSettings.viewports}});export{c as default};
//# sourceMappingURL=index-2WycJoQK.js.map
