{"version":3,"file":"index-DC3ntn2z.js","sources":["../../../../../../../../custom/static-plugins/BlurElysiumSlider/src/Resources/app/administration/src/component/slide/search/template.html.twig","../../../../../../../../custom/static-plugins/BlurElysiumSlider/src/Resources/app/administration/src/component/slide/search/index.ts"],"sourcesContent":["<div :style=\"{ \n        position: 'relative',\n    }\">\n    <sw-simple-search-field\n        class=\"elysium-slide-selection-search-field\"\n        v-model:value=\"searchTerm\"\n        :delay=\"300\"\n        placeholder=\"Slides durchsuchen\"\n        variant=\"form\"\n        @focus=\"focusSearch\"\n    />\n    <sw-select-result-list\n        v-if=\"searchFocus === true\"\n        ref=\"resultList\"\n        :options=\"slidesCollection\"\n        :empty-message=\"$tc('blurElysiumSlides.slideSearch.noResult')\"\n        @item-select=\"selectSlide\"\n        @outside-click=\"blurSearch\"\n    >\n        <template #before-item-list=\"{item, index}\">\n            <div\n                v-if=\"slidesLoading\"\n                :style=\"{ \n                position: 'relative',\n                    minHeight: '64px',\n                }\"\n            >\n                <mt-loader size=\"24px\"/>\n            </div>\n        </template>\n\n        <template #result-item=\"{item, index}\">\n            <sw-select-result\n                :selected=\"slideIsSelected( item )\"\n                v-bind=\"{ item, index }\"\n                class=\"blur-es-selection__search-result-list-item\"\n                @item-select=\"selectSlide\"\n            >\n                <div class=\"elysium-slide-selection-search-item\">\n                    <div>\n                        <sw-highlight-text\n                            :class=\"['elysium-slide-selection-search-name']\"\n                            :searchTerm=\"searchTerm\"\n                            :text=\"item.translated.name\"\n                        />\n                        <sw-highlight-text\n                            :class=\"['elysium-slide-selection-search-title']\"\n                            :searchTerm=\"searchTerm\"\n                            :text=\"item.translated.title ? item.translated.title.replace(/<\\/?[^>]+>/ig, ' ') : $tc('blurElysium.general.noHeadline')\"\n                        />\n                    </div>\n                    <div>\n                        {{slideIsSelected(item) ? $tc('blurElysium.general.removeItem') : $tc('blurElysium.general.addItem') }}\n                    </div>\n                </div>\n            </sw-select-result>\n        </template>\n    </sw-select-result-list>\n</div>","import template from './template.html.twig';\n\nconst { Component, Data, Context } = Shopware;\nconst { Criteria } = Data;\n\nexport default Component.wrapComponentConfig({\n    template,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        selectedSlides: {\n            type: Array,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            searchTerm: '',\n            searchFocus: false,\n            slidesCollection: {},\n            slidesLoading: true,\n        };\n    },\n\n    watch: {\n        searchFocus(value: boolean) {\n            if (value === true) {\n                this.loadSlides();\n            } else {\n                this.slidesCollection = {};\n            }\n        },\n\n        searchTerm() {\n            this.loadSlides();\n        },\n    },\n\n    computed: {\n        slidesRepository() {\n            return this.repositoryFactory.create('blur_elysium_slides');\n        },\n\n        slidesCriteria() {\n            const criteria = new Criteria();\n\n            criteria.setTerm(this.searchTerm);\n            criteria.setLimit(20);\n\n            return criteria;\n        },\n    },\n\n    methods: {\n        focusSearch() {\n            this.slidesLoading = true;\n            this.searchFocus = true;\n        },\n\n        blurSearch() {\n            this.searchFocus = false;\n        },\n\n        loadSlides() {\n            this.slidesRepository\n                .search(this.slidesCriteria, Context.api)\n                .then((result) => {\n                    this.slidesCollection = result;\n                    this.slidesLoading = false;\n                })\n                .catch((error) => {\n                    console.error('Error loading slides', error);\n                });\n        },\n\n        selectSlide(slide) {\n            this.searchFocus = false;\n            if (this.slideIsSelected(slide)) {\n                this.$emit('remove-slide', slide);\n            } else {\n                this.$emit('add-slide', slide);\n            }\n        },\n\n        slideIsSelected(slide) {\n            return this.selectedSlides.some(\n                (selectedSlide) => selectedSlide.id === slide.id\n            );\n        },\n    },\n});\n"],"names":["template","Component","Data","Context","Criteria","index","value","criteria","result","error","slide","selectedSlide"],"mappings":"AAAA,MAAAA,EAAe,+3CCET,CAAE,UAAAC,EAAW,KAAAC,EAAM,QAAAC,CAAA,EAAY,SAC/B,CAAE,SAAAC,GAAaF,EAErBG,EAAeJ,EAAU,oBAAoB,CACzC,SAAAD,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CACH,eAAgB,CACZ,KAAM,MACN,SAAU,EAAA,CACd,EAGJ,MAAO,CACH,MAAO,CACH,WAAY,GACZ,YAAa,GACb,iBAAkB,CAAA,EAClB,cAAe,EAAA,CACnB,EAGJ,MAAO,CACH,YAAYM,EAAgB,CACpBA,IAAU,GACV,KAAK,WAAA,EAEL,KAAK,iBAAmB,CAAA,CAC5B,EAGJ,YAAa,CACT,KAAK,WAAA,CAAW,CACpB,EAGJ,SAAU,CACN,kBAAmB,CACf,OAAO,KAAK,kBAAkB,OAAO,qBAAqB,CAAA,EAG9D,gBAAiB,CACb,MAAMC,EAAW,IAAIH,EAErB,OAAAG,EAAS,QAAQ,KAAK,UAAU,EAChCA,EAAS,SAAS,EAAE,EAEbA,CAAA,CACX,EAGJ,QAAS,CACL,aAAc,CACV,KAAK,cAAgB,GACrB,KAAK,YAAc,EAAA,EAGvB,YAAa,CACT,KAAK,YAAc,EAAA,EAGvB,YAAa,CACT,KAAK,iBACA,OAAO,KAAK,eAAgBJ,EAAQ,GAAG,EACvC,KAAMK,GAAW,CACd,KAAK,iBAAmBA,EACxB,KAAK,cAAgB,EAAA,CACxB,EACA,MAAOC,GAAU,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CAAA,CAC9C,CAAA,EAGT,YAAYC,EAAO,CACf,KAAK,YAAc,GACf,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,MAAM,eAAgBA,CAAK,EAEhC,KAAK,MAAM,YAAaA,CAAK,CACjC,EAGJ,gBAAgBA,EAAO,CACnB,OAAO,KAAK,eAAe,KACtBC,GAAkBA,EAAc,KAAOD,EAAM,EAAA,CAClD,CACJ,CAER,CAAC"}