{"version":3,"file":"index-BBC-IOZb.js","sources":["../../../app/administration/src/component/utilities/slide-search/template.html.twig","../../../app/administration/src/component/utilities/slide-search/index.ts"],"sourcesContent":["<div \n    :style=\"{ \n        position: 'relative',\n    }\">\n\n    <sw-simple-search-field\n        class=\"blur-elysium-slide-selection-search-field\"\n        v-model:value=\"searchTerm\"\n        :delay=\"300\" \n        placeholder=\"Slides durchsuchen\"\n        variant=\"form\" \n        @focus=\"focusSearch\" />\n\n    <sw-select-result-list \n        v-if=\"searchFocus === true\"\n        ref=\"resultList\"\n        :options=\"slidesCollection\"\n        :empty-message=\"$tc('blurElysiumSlides.slideSearch.noResult')\"\n        @item-select=\"selectSlide\"\n        @outside-click=\"blurSearch\">\n\n        <template #before-item-list=\"{item, index}\">\n            <div v-if=\"slidesLoading\"\n                :style=\"{ \n                position: 'relative',\n                    minHeight: '64px',\n                }\">\n                <mt-loader \n                    size=\"24px\" />\n            </div>\n        </template>\n\n        <template #result-item=\"{item, index}\">\n\n            <div\n                is=\"sw-select-result\"\n                :selected=\"slideIsSelected( item )\"\n                v-bind=\"{ item, index }\"\n                class=\"blur-es-selection__search-result-list-item\"\n                @item-select=\"selectSlide\">\n\n                <div class=\"blur-elysium-slide-selection-search-item\">\n                    <div>\n                        <sw-highlight-text \n                            :class=\"['blur-elysium-slide-selection-search-name']\"\n                            :searchTerm=\"searchTerm\"\n                            :text=\"item.translated.name\" />\n                        <sw-highlight-text \n                            :class=\"['blur-elysium-slide-selection-search-title']\"\n                            :searchTerm=\"searchTerm\"\n                            :text=\"item.translated.title ? item.translated.title.replace(/<\\/?[^>]+>/ig, ' ') : $tc('blurElysium.general.noHeadline')\" />\n                    </div>\n\n                    <div>\n                        {{ selectedSlidesIds.includes(item.id) ? $tc('blurElysium.general.removeItem') : $tc('blurElysium.general.addItem') }}\n                    </div>\n                </div>\n            </div>\n\n        </template>\n\n    </sw-select-result-list>\n</div>","import template from './template.html.twig'\n\nconst { Component, Data, Context } = Shopware \nconst { Criteria } = Data \n\nexport default Component.wrapComponentConfig({\n    template,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    props: {\n        selectedSlidesIds: {\n            type: Array,\n            required: true,\n        }\n    },\n\n    data () {\n        return {\n            searchTerm: '',\n            searchFocus: false,\n            slidesCollection: {},\n            slidesLoading: true,\n        }\n    },\n\n    watch: {\n\n        searchFocus(value: boolean) {\n            if (value === true) {\n                this.loadSlides()\n            } else {\n                this.slidesCollection = {}\n            }\n        },\n\n        searchTerm () {\n            this.loadSlides()\n        }\n    },\n\n    computed: {\n        slidesRepository () {\n            return this.repositoryFactory.create('blur_elysium_slides')\n        },\n\n        slidesCriteria () {\n            const criteria = new Criteria()\n\n            criteria.setTerm(this.searchTerm)\n            criteria.setLimit(20)\n\n            return criteria\n        },\n    },\n\n    methods: {\n        focusSearch () {\n            this.slidesLoading = true\n            this.searchFocus = true\n        },\n\n        blurSearch () {\n            this.searchFocus = false\n        },\n\n        loadSlides () {\n            this.slidesRepository.search(this.slidesCriteria, Context.api).then((result) => {\n                this.slidesCollection = result\n                this.slidesLoading = false\n            }).catch((error) => {\n                console.error('Error loading slides', error)\n            })\n        },\n\n        selectSlide (slide) {\n            this.searchFocus = false\n            this.$emit('slide-selected', slide)\n        },\n\n        slideIsSelected (slide) {\n            if (this.selectedSlidesIds.includes(slide.id)) {\n                return true\n            }\n            return false\n        },\n    }\n})\n"],"names":["template","Component","Data","Context","Criteria","index","value","criteria","result","error","slide"],"mappings":"AAAA,MAAeA,EAAA,45CCET,CAAE,UAAAC,EAAW,KAAAC,EAAM,QAAAC,CAAA,EAAY,SAC/B,CAAE,SAAAC,CAAa,EAAAF,EAENG,EAAAJ,EAAU,oBAAoB,CACzC,SAAAD,EAEA,OAAQ,CACJ,mBACJ,EAEA,MAAO,CACH,kBAAmB,CACf,KAAM,MACN,SAAU,EAAA,CAElB,EAEA,MAAQ,CACG,MAAA,CACH,WAAY,GACZ,YAAa,GACb,iBAAkB,CAAC,EACnB,cAAe,EACnB,CACJ,EAEA,MAAO,CAEH,YAAYM,EAAgB,CACpBA,IAAU,GACV,KAAK,WAAW,EAEhB,KAAK,iBAAmB,CAAC,CAEjC,EAEA,YAAc,CACV,KAAK,WAAW,CAAA,CAExB,EAEA,SAAU,CACN,kBAAoB,CACT,OAAA,KAAK,kBAAkB,OAAO,qBAAqB,CAC9D,EAEA,gBAAkB,CACR,MAAAC,EAAW,IAAIH,EAEZ,OAAAG,EAAA,QAAQ,KAAK,UAAU,EAChCA,EAAS,SAAS,EAAE,EAEbA,CAAA,CAEf,EAEA,QAAS,CACL,aAAe,CACX,KAAK,cAAgB,GACrB,KAAK,YAAc,EACvB,EAEA,YAAc,CACV,KAAK,YAAc,EACvB,EAEA,YAAc,CACL,KAAA,iBAAiB,OAAO,KAAK,eAAgBJ,EAAQ,GAAG,EAAE,KAAMK,GAAW,CAC5E,KAAK,iBAAmBA,EACxB,KAAK,cAAgB,EAAA,CACxB,EAAE,MAAOC,GAAU,CACR,QAAA,MAAM,uBAAwBA,CAAK,CAAA,CAC9C,CACL,EAEA,YAAaC,EAAO,CAChB,KAAK,YAAc,GACd,KAAA,MAAM,iBAAkBA,CAAK,CACtC,EAEA,gBAAiBA,EAAO,CACpB,MAAI,OAAK,kBAAkB,SAASA,EAAM,EAAE,CAGrC,CACX,CAER,CAAC"}