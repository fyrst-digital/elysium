(this["webpackJsonpPluginblur-elysium-slider"]=this["webpackJsonpPluginblur-elysium-slider"]||[]).push([[1],{"+QrC":function(e,s,i){"use strict";i.r(s);i("OXi+");var l=Shopware.Data.Criteria,t=Shopware,n=(t.Component,t.Context,t.Mixin,Shopware.Component.getComponentHelper());n.mapPropertyErrors,n.mapState,s.default={template:'{% block blur_elysium_slide_selection %}\n    <div>\n\n        {% block blur_elysium_slide_selection_label %}\n            <div class="blur-es-selection-label">\n                {{ $tc(\'blurElysiumSlides.slideSelection.label\') }}\n            </div>\n        {% endblock %}\n\n        {% block blur_elysium_slide_selection_search %}\n            <div class="blur-es-selection__search">\n\n                {% block blur_elysium_slide_selection_search_bar %}\n                    <sw-simple-search-field\n                        ref="slideSearchField"\n                        v-model="searchTerm"\n                        :delay="300" \n                        variant="form"\n                        @focus="focusSearch"\n                        @blur="blurSearch" />\n                {% endblock %}\n\n                <template v-if="searchFocus === true">\n\n                    {% block blur_elysium_slide_selection_search_result_list %}\n                        <sw-select-result-list \n                            ref="resultList"\n                            :options="elysiumSlides"\n                            :empty-message="$tc(\'blurElysiumSlides.slideSearch.noResult\')"\n                            :focus-el="$refs.slideSearchField.$el.querySelector(\'input\')"\n                            @item-select="selectSlide"\n                        >\n\n                            <template #result-item="{item, index}">\n\n                                <slot\n                                    name="result-item"\n                                    v-bind="{ item, index }"\n                                >\n                                    {% block blur_elysium_slide_selection_search_result_item %}\n                                        <li\n                                            is="sw-select-result"\n                                            :selected="slideIsSelected( item )"\n                                            v-bind="{ item, index }"\n                                            class="blur-es-selection__search-result-list-item"\n                                            @item-select.prevent="selectSlide">\n                                            <div class="blur-es-selection__search-result-item">\n                                                <div>\n                                                    <div>{{ item.name }}</div>\n                                                    <div style="font-weight:600;">{{ item.title }}</div>\n                                                </div>\n                                                <div>\n                                                    {{ selectedSlides.includes(item.id) ? $tc(\'blurElysiumSlides.slideSearch.removeItem\') : $tc(\'blurElysiumSlides.slideSearch.addItem\') }}\n                                                </div>\n                                            </div>\n                                        </li>\n                                    {% endblock %}\n                                </slot>\n\n                            </template>\n                        </sw-select-result-list>\n                    {% endblock %}\n\n                </template>        \n            </div>\n        {% endblock %}\n\n        {% block blur_elysium_slide_selection_list_container %}\n            <div v-if="selectedSlides.length > 0"\n                class="blur-es-selection__list-container">\n\n                {% block blur_elysium_slide_selection_list_label %}\n                    <div class="blur-es-selection__list-label">\n                        {{ $tc(\'blurElysiumSlides.slideSelection.list.label\') }}\n                    </div>\n                {% endblock %}\n\n                {% block blur_elysium_slide_selection_list %}\n                    <div class="blur-es-selection__list"\n                        @drop="onDrop($event)"\n                        @dragover.prevent\n                        @dragenter.prevent>\n                        {% block blur_elysium_slide_selection_list_item %}\n                            <blur-elysium-slide-select-item \n                                v-for="slide in selectedSlides" \n                                :key="slide"\n                                :selected-slide="slide" \n                                draggable\n                                @start-drag="startDrag"\n                                @over-drag="onDrag"\n                                @position-up="slidePositionUp"\n                                @position-down="slidePositionDown"\n                                @edit-slide="onEditSlide"\n                                @remove-slide="onRemoveSlide" />\n                        {% endblock %}\n                    </div>\n                {% endblock %}\n            </div>\n            <p v-else class="blur-es-selection__list-helptext" \n                v-html="$tc(\'blurElysiumSlides.slideSelection.list.helptext\')" />\n        {% endblock %}\n\n    </div>\n{% endblock %}\n',inject:["repositoryFactory"],props:{selectedSlides:{type:Array}},data:function(){return{searchTerm:"",searchFocus:!1,elysiumSlides:[],currentDragIndex:null}},watch:{searchTerm:function(e,s){this.inputSearch()}},computed:{elysiumSlidesRepository:function(){return this.repositoryFactory.create("blur_elysium_slides")},elysiumSlidesCriteria:function(){var e=new l;return e.setTerm(this.searchTerm),e}},created:function(){this.getElysiumSlides()},methods:{inputSearch:function(){this.getElysiumSlides()},focusSearch:function(){this.searchFocus=!0},blurSearch:function(e){null!==e.relatedTarget&&(this.searchFocus=!1)},getElysiumSlides:function(){var e=this;this.elysiumSlidesRepository.search(this.elysiumSlidesCriteria,Shopware.Context.api).then((function(s){e.elysiumSlides=s}))},selectSlide:function(e){var s=this.selectedSlides.indexOf(e.id);switch(this.selectedSlides.includes(e.id)){case!1:this.selectedSlides.push(e.id);break;case!0:this.selectedSlides.splice(s,1);break;default:this.selectedSlides.push(e.id)}this.searchFocus=!1},slideIsSelected:function(e){return!!this.selectedSlides.includes(e.id)},slidePositionUp:function(e){var s=this.selectedSlides.indexOf(e),i=s-1;i>=0&&(this.selectedSlides.splice(s,1),this.selectedSlides.splice(i,0,e))},slidePositionDown:function(e){var s=this.selectedSlides.indexOf(e),i=s+1;s<this.selectedSlides.length-1&&(this.selectedSlides.splice(s,1),this.selectedSlides.splice(i,0,e))},onRemoveSlide:function(e){this.selectedSlides.splice(this.selectedSlides.indexOf(e),1)},onEditSlide:function(e){var s=this.$router.resolve({name:"blur.elysium.slides.detail",params:{id:e}});window.open(s.href,"_blank")},startDrag:function(e,s){s.dataTransfer.setData("startSlideId",e),s.dataTransfer.setData("startSlideIndex",this.selectedSlides.indexOf(e))},onDrag:function(e,s){this.currentDragIndex=this.selectedSlides.indexOf(e)},onDrop:function(e){this.selectedSlides.splice(e.dataTransfer.getData("startSlideIndex"),1),this.selectedSlides.splice(this.currentDragIndex,0,e.dataTransfer.getData("startSlideId"))}}}},"OXi+":function(e,s,i){var l=i("Vz+J");l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);(0,i("ydqr").default)("203f8920",l,!0,{})},"Vz+J":function(e,s,i){}}]);