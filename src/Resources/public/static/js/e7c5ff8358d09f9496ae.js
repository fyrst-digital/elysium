(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[346],{8115:function(){},346:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}}),t(7143);let{Component:i,Data:l,Context:n}=Shopware,{Criteria:r}=l;var d=i.wrapComponentConfig({template:'<div class="blur-elysium-slide-selection">\n\n    <div v-if="slidesCollection.total === 0"\n        class="blur-elysium-slide-selection-empty">\n        <p style="margin-bottom:1rem;line-height:1.5;">\n            {{ $tc( \'blurElysiumSlides.slideSelection.noSlides\' ) }}\n        </p>\n        <div class="blur-elysium-slide-selection-empty-actions">\n            <sw-button\n                variant="primary"\n                @click="onCreateSlide">\n                {{ $tc( \'blurElysium.action.createSlide\' ) }}\n                <blur-icon \n                    name="blurph-arrow-square-out-bold"\n                    :size="14" />\n            </sw-button>\n            <sw-button\n                @click="onSlideOverview">\n                {{ $tc( \'blurElysium.action.toOverview\' ) }}\n                <blur-icon \n                    name="blurph-arrow-square-out-bold"\n                    :size="14" />\n            </sw-button>\n        </div>\n    </div>\n\n    <div class="blur-elysium-slide-selection-search">\n\n        <div class="blur-elysium-slide-selection-search-label">\n            {{$tc(\'blurElysiumSlides.slideSelection.searchLabel\')}}\n        </div>\n\n        <sw-simple-search-field\n            v-model:value="searchTerm"\n            :delay="300" \n            variant="form"\n            @focus="focusSearch"\n            @blur="blurSearch" />\n\n        <sw-select-result-list \n            v-if="searchFocus === true"\n            ref="resultList"\n            :options="slidesCollection"\n            :empty-message="$tc(\'blurElysiumSlides.slideSearch.noResult\')"\n            @item-select="selectSlide">\n\n            <template #result-item="{item, index}">\n\n                <div\n                    is="sw-select-result"\n                    :selected="slideIsSelected( item )"\n                    v-bind="{ item, index }"\n                    class="blur-es-selection__search-result-list-item"\n                    @item-select.prevent="selectSlide">\n\n                    <div class="blur-elysium-slide-selection-search-item">\n                        <div>\n                            <sw-highlight-text \n                                :class="[\'blur-elysium-slide-selection-search-name\']"\n                                :searchTerm="searchTerm"\n                                :text="item.translated.name" />\n                            <sw-highlight-text \n                                :class="[\'blur-elysium-slide-selection-search-title\']"\n                                :searchTerm="searchTerm"\n                                :text="item.translated.title ? item.translated.title.replace(/<\\/?[^>]+>/ig, \' \') : $tc(\'blurElysium.general.noHeadline\')" />\n                        </div>\n                        <div>\n                            {{ selectedSlides.includes(item.id) ? $tc(\'blurElysium.general.removeItem\') : $tc(\'blurElysium.general.addItem\') }}\n                        </div>\n                    </div>\n                </div>\n\n            </template>\n\n        </sw-select-result-list>\n    </div>\n\n    <div v-if="selectedSlides.length > 0"\n        class="blur-elysium-slide-selection-results">\n\n        <div class="blur-elysium-slide-selection-results-label">\n            {{ $tc(\'blurElysiumSlides.slideSelection.listLabel\') }}\n        </div>\n\n        <div class="blur-elysium-slide-selection-results-list"\n            ref="selectionList"\n            @drop="onDrop($event)"\n            @dragend="dragEnd($event)"\n            @dragover.prevent\n            @dragenter.prevent>\n\n            <blur-elysium-slide-selection-item \n                v-for="slide in selectedSlides" \n                :key="slide"\n                :selected-slide="slide"\n                draggable\n                @slide-loaded="slideLoaded"\n                @start-drag="startDrag"\n                @enter-drag="onDrag"\n                @position-up="slidePositionUp"\n                @position-down="slidePositionDown"\n                @edit-slide="onEditSlide"\n                @remove-slide="onRemoveSlide"/>\n\n        </div>\n\n    </div>\n\n    <sw-alert v-else>\n        <span v-html="$tc(\'blurElysiumSlides.slideSelection.listNoSelection\')" />\n    </sw-alert>\n\n</div>',inject:["repositoryFactory"],props:{selectedSlides:{type:Array,required:!0}},data(){return{searchTerm:"",searchFocus:!1,slidesCollection:{},currentDragIndex:0,draggedSlideId:null,draggedSlideElement:null,placeholderElement:document.createElement("div")}},watch:{searchFocus(e){!0===e&&this.loadSlides()},searchTerm(){this.loadSlides()}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")},slidesCriteria(){let e=new r;return e.setTerm(this.searchTerm),e.setLimit(20),e}},mounted(){this.placeholderElement.style.borderRadius="12px",this.placeholderElement.style.backgroundColor="#eeeeee"},methods:{inputSearch(){this.loadSlides()},focusSearch(){this.searchFocus=!0},blurSearch(e){null!==e.relatedTarget&&(this.searchFocus=!1)},loadSlides(){this.slidesRepository.search(this.slidesCriteria,n.api).then(e=>{this.slidesCollection=e})},selectSlide(e){let s=this.selectedSlides.indexOf(e.id);switch(this.selectedSlides.includes(e.id)){case!1:this.selectedSlides.push(e.id);break;case!0:this.selectedSlides.splice(s,1);break;default:this.selectedSlides.push(e.id)}this.searchFocus=!1},slideIsSelected(e){return!!this.selectedSlides.includes(e.id)},slideLoaded(e,s){null===e&&this.onRemoveSlide(s)},onDrop(){this.selectedSlides.splice(this.selectedSlides.indexOf(this.draggedSlideId),1),this.draggedSlideElement.classList.remove("is-dragged"),this.selectedSlides.splice(this.currentDragIndex,0,this.draggedSlideId),this.placeholderElement.remove()},dragEnd(e){e.target.classList.remove("is-dragged"),this.placeholderElement.remove()},startDrag(e,s,t){this.draggedSlideId=e,this.draggedSlideElement=t,this.placeholderElement.style.height=`${t.offsetHeight}px`},onDrag(e,s,t){this.draggedSlideId===e&&this.draggedSlideElement.classList.add("is-dragged"),this.currentDragIndex!==this.selectedSlides.indexOf(e)?t.before(this.placeholderElement):t.after(this.placeholderElement),this.currentDragIndex=this.selectedSlides.indexOf(e)},slidePositionUp(e){let s=this.selectedSlides.indexOf(e),t=s-1;t>=0&&(this.selectedSlides.splice(s,1),this.selectedSlides.splice(t,0,e))},slidePositionDown(e){let s=this.selectedSlides.indexOf(e);s<this.selectedSlides.length-1&&(this.selectedSlides.splice(s,1),this.selectedSlides.splice(s+1,0,e))},onRemoveSlide(e){this.selectedSlides.splice(this.selectedSlides.indexOf(e),1)},onEditSlide(e){let s=this.$router.resolve({name:"blur.elysium.slides.detail",params:{id:e}});window.open(s.href,"_blank")},onCreateSlide(){let e=this.$router.resolve({name:"blur.elysium.slides.create"});window.open(e.href,"_blank")},onSlideOverview(){let e=this.$router.resolve({name:"blur.elysium.slides.overview"});window.open(e.href,"_blank")}},created(){this.loadSlides()}})},7143:function(e,s,t){var i=t(8115);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),t(5346).Z("44e9d050",i,!0,{})},5346:function(e,s,t){"use strict";function i(e,s){for(var t=[],i={},l=0;l<s.length;l++){var n=s[l],r=n[0],d={id:e+":"+l,css:n[1],media:n[2],sourceMap:n[3]};i[r]?i[r].parts.push(d):t.push(i[r]={id:r,parts:[d]})}return t}t.d(s,{Z:function(){return p}});var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n={},r=l&&(document.head||document.getElementsByTagName("head")[0]),d=null,a=0,o=!1,c=function(){},u=null,h="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,s,t,l){o=t,u=l||{};var r=i(e,s);return v(r),function(s){for(var t=[],l=0;l<r.length;l++){var d=n[r[l].id];d.refs--,t.push(d)}s?v(r=i(e,s)):r=[];for(var l=0;l<t.length;l++){var d=t[l];if(0===d.refs){for(var a=0;a<d.parts.length;a++)d.parts[a]();delete n[d.id]}}}}function v(e){for(var s=0;s<e.length;s++){var t=e[s],i=n[t.id];if(i){i.refs++;for(var l=0;l<i.parts.length;l++)i.parts[l](t.parts[l]);for(;l<t.parts.length;l++)i.parts.push(f(t.parts[l]));i.parts.length>t.parts.length&&(i.parts.length=t.parts.length)}else{for(var r=[],l=0;l<t.parts.length;l++)r.push(f(t.parts[l]));n[t.id]={id:t.id,refs:1,parts:r}}}}function g(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function f(e){var s,t,i=document.querySelector("style["+h+'~="'+e.id+'"]');if(i){if(o)return c;i.parentNode.removeChild(i)}if(m){var l=a++;s=b.bind(null,i=d||(d=g()),l,!1),t=b.bind(null,i,l,!0)}else s=y.bind(null,i=g()),t=function(){i.parentNode.removeChild(i)};return s(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&s(e=i):t()}}var S=function(){var e=[];return function(s,t){return e[s]=t,e.filter(Boolean).join("\n")}}();function b(e,s,t,i){var l=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=S(s,l);else{var n=document.createTextNode(l),r=e.childNodes;r[s]&&e.removeChild(r[s]),r.length?e.insertBefore(n,r[s]):e.appendChild(n)}}function y(e,s){var t=s.css,i=s.media,l=s.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(h,s.id),l&&(t+="\n/*# sourceURL="+l.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);