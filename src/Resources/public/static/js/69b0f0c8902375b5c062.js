(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[6343],{9906:function(){},6343:function(e,s,d){"use strict";d.r(s),d.d(s,{default:function(){return r}}),d(2097);let{Component:i,Data:l,Context:t}=Shopware,{Criteria:n}=l;var r=i.wrapComponentConfig({template:'\n<div \n    :style="{\n        display: \'flex\',\n        flexDirection: \'column\',\n        gap: \'24px\',\n    }">\n\n    <blur-elysium-slide-search \n        :selected-slides-ids="selectedSlidesIds"\n        @slide-selected="selectSlide" />\n\n    <div v-if="selectedSlides.length > 0"\n        class="blur-elysium-slide-selection-results">\n\n        <div class="blur-elysium-slide-selection-results-list"\n            ref="selectionList"\n            @drop="onDrop($event)"\n            @dragend="dragEnd($event)"\n            @dragover.prevent\n            @dragenter.prevent>\n\n            <blur-elysium-slide-selection-item \n                v-for="slide in selectedSlides" \n                :key="slide.id"\n                :slide="slide"\n                draggable\n                @slide-loaded="slideLoaded"\n                @start-drag="startDrag"\n                @enter-drag="onDrag"\n                @position-up="slidePositionUp"\n                @position-down="slidePositionDown"\n                @edit-slide="slideEdit"\n                @remove-slide="slideRemove"/>\n\n        </div>\n    </div>\n\n    <div v-if="isLoading && selectedSlidesIds.length > 0"\n        :style="{\n            display: \'flex\',\n            flexDirection: \'column\',\n            gap: \'30px\',\n        }">\n        \n        <div v-for="placholder in selectedSlidesIds.length"\n            :key="placholder"\n            :style="{\n                minHeight: \'114px\',\n                position: \'relative\',\n                borderRadius: \'10px\',\n                overflow: \'hidden\',\n            }">\n            <mt-loader size="24px"/>\n        </div>\n    </div>\n\n    {# <mt-banner \n        v-else\n        variant="info">\n\n        <span v-html="$tc(\'blurElysiumSlides.slideSelection.listNoSelection\')" />\n    </mt-banner> #}\n\n</div>\n',inject:["repositoryFactory"],props:{selectedSlidesIds:{type:Array,required:!0}},data(){return{isLoading:!0,selectedSlides:{},currentDragIndex:0,draggedSlideId:null,draggedSlideElement:null,placeholderElement:document.createElement("div")}},watch:{selectedSlides:{handler(){this.selectedSlidesIds.length=0,this.selectedSlidesIds.push(...this.selectedSlides.map(e=>e.id))},deep:!1}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")}},mounted(){this.placeholderElement.style.borderRadius="12px",this.placeholderElement.style.backgroundColor="#eeeeee"},methods:{initSlides(){let e=new n;e.setIds(this.selectedSlidesIds),this.slidesRepository.search(e,t.api).then(e=>{let s=e.filter(e=>this.selectedSlidesIds.includes(e.id));this.selectedSlides=s,s.length<=0&&(this.selectedSlidesIds.length=0),this.isLoading=!1}).catch(e=>{console.error("Error loading slides",e)})},selectSlide(e){(this.selectedSlidesIds.indexOf(e.id),!0===this.selectedSlidesIds.includes(e.id))?this.selectedSlides.remove(e.id):this.selectedSlides.add(e),console.log("selectSlideNew",e,this.selectedSlides)},onDrop(){this.selectedSlidesIds.splice(this.selectedSlidesIds.indexOf(this.draggedSlideId),1),this.draggedSlideElement.classList.remove("is-dragged"),this.selectedSlidesIds.splice(this.currentDragIndex,0,this.draggedSlideId),this.placeholderElement.remove()},dragEnd(e){e.target.classList.remove("is-dragged"),this.placeholderElement.remove()},startDrag(e,s,d){this.draggedSlideId=e,this.draggedSlideElement=d,this.placeholderElement.style.height=`${d.offsetHeight}px`},onDrag(e,s,d){this.draggedSlideId===e&&this.draggedSlideElement.classList.add("is-dragged"),this.currentDragIndex!==this.selectedSlidesIds.indexOf(e)?d.before(this.placeholderElement):d.after(this.placeholderElement),this.currentDragIndex=this.selectedSlidesIds.indexOf(e)},slidePositionUp(e){let s=this.selectedSlides.indexOf(e);s>0&&this.selectedSlides.moveItem(s,s-1)},slidePositionDown(e){let s=this.selectedSlides.indexOf(e);s<this.selectedSlides.length-1&&this.selectedSlides.moveItem(s,s+1)},slideRemove(e){this.selectedSlides.remove(e.id)},slideEdit(e){let s=this.$router.resolve({name:"blur.elysium.slides.detail",params:{id:e.id}});window.open(s.href,"_blank")},onCreateSlide(){let e=this.$router.resolve({name:"blur.elysium.slides.create"});window.open(e.href,"_blank")},onSlideOverview(){let e=this.$router.resolve({name:"blur.elysium.slides.overview"});window.open(e.href,"_blank")}},created(){this.initSlides(),console.log("selectedSlidesIds",this.selectedSlidesIds)}})},2097:function(e,s,d){var i=d(9906);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,d(534).A)("70829894",i,!0,{})}}]);