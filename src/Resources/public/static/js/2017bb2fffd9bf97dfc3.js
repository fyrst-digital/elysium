(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[6343],{9906:function(){},6343:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return r}}),l(2097);let{Component:i,Data:t,Context:n}=Shopware,{Criteria:d}=t;var r=i.wrapComponentConfig({template:'<div class="blur-elysium-slide-selection">\n\n    <div v-if="slidesCollection.total === 0"\n        class="blur-elysium-slide-selection-empty">\n        <p style="margin-bottom:1rem;line-height:1.5;">\n            {{ $tc( \'blurElysiumSlides.slideSelection.noSlides\' ) }}\n        </p>\n        <div class="blur-elysium-slide-selection-empty-actions">\n            <sw-button\n                variant="primary"\n                @click="onCreateSlide">\n                {{ $tc( \'blurElysium.action.createSlide\' ) }}\n                <blur-icon \n                    name="blurph-arrow-square-out-bold"\n                    :size="14" />\n            </sw-button>\n            <sw-button\n                @click="onSlideOverview">\n                {{ $tc( \'blurElysium.action.toOverview\' ) }}\n                <blur-icon \n                    name="blurph-arrow-square-out-bold"\n                    :size="14" />\n            </sw-button>\n        </div>\n    </div>\n\n    <div class="blur-elysium-slide-selection-search">\n\n        <div class="blur-elysium-slide-selection-search-label">\n            {{$tc(\'blurElysiumSlides.slideSelection.searchLabel\')}}\n        </div>\n\n        <sw-simple-search-field\n            v-model:value="searchTerm"\n            class="blur-elysium-slide-selection-search-field"\n            :delay="300" \n            variant="form"\n            @focus="focusSearch"\n            @blur="blurSearch" />\n\n        <sw-select-result-list \n            v-if="searchFocus === true"\n            ref="resultList"\n            :options="slidesCollection"\n            :empty-message="$tc(\'blurElysiumSlides.slideSearch.noResult\')"\n            @item-select="selectSlide">\n\n            <template #result-item="{item, index}">\n\n                <div\n                    is="sw-select-result"\n                    :selected="slideIsSelected( item )"\n                    v-bind="{ item, index }"\n                    class="blur-es-selection__search-result-list-item"\n                    @item-select.prevent="selectSlide">\n\n                    <div class="blur-elysium-slide-selection-search-item">\n                        <div>\n                            <sw-highlight-text \n                                :class="[\'blur-elysium-slide-selection-search-name\']"\n                                :searchTerm="searchTerm"\n                                :text="item.translated.name" />\n                            <sw-highlight-text \n                                :class="[\'blur-elysium-slide-selection-search-title\']"\n                                :searchTerm="searchTerm"\n                                :text="item.translated.title ? item.translated.title.replace(/<\\/?[^>]+>/ig, \' \') : $tc(\'blurElysium.general.noHeadline\')" />\n                        </div>\n                        <div>\n                            {{ selectedSlides.includes(item.id) ? $tc(\'blurElysium.general.removeItem\') : $tc(\'blurElysium.general.addItem\') }}\n                        </div>\n                    </div>\n                </div>\n\n            </template>\n\n        </sw-select-result-list>\n    </div>\n\n    <div v-if="selectedSlides.length > 0"\n        class="blur-elysium-slide-selection-results">\n\n        <div class="blur-elysium-slide-selection-results-list"\n            ref="selectionList"\n            @drop="onDrop($event)"\n            @dragend="dragEnd($event)"\n            @dragover.prevent\n            @dragenter.prevent>\n\n            <blur-elysium-slide-selection-item \n                v-for="slide in selectedSlides" \n                :key="slide"\n                :selected-slide="slide"\n                draggable\n                @slide-loaded="slideLoaded"\n                @start-drag="startDrag"\n                @enter-drag="onDrag"\n                @position-up="slidePositionUp"\n                @position-down="slidePositionDown"\n                @edit-slide="onEditSlide"\n                @remove-slide="onRemoveSlide"/>\n\n        </div>\n\n    </div>\n\n    <mt-banner \n        v-else\n        variant="info">\n\n        <span v-html="$tc(\'blurElysiumSlides.slideSelection.listNoSelection\')" />\n    </mt-banner>\n\n</div>',inject:["repositoryFactory"],props:{selectedSlides:{type:Array,required:!0}},data(){return{searchTerm:"",searchFocus:!1,slidesCollection:{},currentDragIndex:0,draggedSlideId:null,draggedSlideElement:null,placeholderElement:document.createElement("div")}},watch:{searchFocus(e){!0===e&&this.loadSlides()},searchTerm(){this.loadSlides()}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")},slidesCriteria(){let e=new d;return e.setTerm(this.searchTerm),e.setLimit(20),e}},mounted(){this.placeholderElement.style.borderRadius="12px",this.placeholderElement.style.backgroundColor="#eeeeee"},methods:{inputSearch(){this.loadSlides()},focusSearch(){this.searchFocus=!0},blurSearch(e){null!==e.relatedTarget&&(this.searchFocus=!1)},loadSlides(){this.slidesRepository.search(this.slidesCriteria,n.api).then(e=>{this.slidesCollection=e})},selectSlide(e){let s=this.selectedSlides.indexOf(e.id);switch(this.selectedSlides.includes(e.id)){case!1:this.selectedSlides.push(e.id);break;case!0:this.selectedSlides.splice(s,1);break;default:this.selectedSlides.push(e.id)}this.searchFocus=!1},slideIsSelected(e){return!!this.selectedSlides.includes(e.id)},slideLoaded(e,s){null===e&&this.onRemoveSlide(s)},onDrop(){this.selectedSlides.splice(this.selectedSlides.indexOf(this.draggedSlideId),1),this.draggedSlideElement.classList.remove("is-dragged"),this.selectedSlides.splice(this.currentDragIndex,0,this.draggedSlideId),this.placeholderElement.remove()},dragEnd(e){e.target.classList.remove("is-dragged"),this.placeholderElement.remove()},startDrag(e,s,l){this.draggedSlideId=e,this.draggedSlideElement=l,this.placeholderElement.style.height=`${l.offsetHeight}px`},onDrag(e,s,l){this.draggedSlideId===e&&this.draggedSlideElement.classList.add("is-dragged"),this.currentDragIndex!==this.selectedSlides.indexOf(e)?l.before(this.placeholderElement):l.after(this.placeholderElement),this.currentDragIndex=this.selectedSlides.indexOf(e)},slidePositionUp(e){let s=this.selectedSlides.indexOf(e),l=s-1;l>=0&&(this.selectedSlides.splice(s,1),this.selectedSlides.splice(l,0,e))},slidePositionDown(e){let s=this.selectedSlides.indexOf(e);s<this.selectedSlides.length-1&&(this.selectedSlides.splice(s,1),this.selectedSlides.splice(s+1,0,e))},onRemoveSlide(e){this.selectedSlides.splice(this.selectedSlides.indexOf(e),1)},onEditSlide(e){let s=this.$router.resolve({name:"blur.elysium.slides.detail",params:{id:e}});window.open(s.href,"_blank")},onCreateSlide(){let e=this.$router.resolve({name:"blur.elysium.slides.create"});window.open(e.href,"_blank")},onSlideOverview(){let e=this.$router.resolve({name:"blur.elysium.slides.overview"});window.open(e.href,"_blank")}},created(){this.loadSlides()}})},2097:function(e,s,l){var i=l(9906);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,l(534).A)("70829894",i,!0,{})}}]);