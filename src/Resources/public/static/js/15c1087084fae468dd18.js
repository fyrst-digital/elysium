"use strict";(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[4365],{4365:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var s=i(5614);let{Component:n,Mixin:l,Data:r,State:a,Filter:o,Context:m}=Shopware,{Criteria:d}=r;var u=n.wrapComponentConfig({template:'<sw-page>\n\n    <template #search-bar>\n\n        <sw-search-bar\n            initial-search-type="blur_elysium_slides"\n            :initial-search="searchTerm"\n            @search="onSearch"/>\n\n    </template>\n\n    <template #smart-bar-header>\n\n        <div :style="styles.moduleHeading">\n            <blur-elysium-slides-icon \n                :color="module.color" />\n\n            <h2>\n                {{ $t(\'blurElysiumSlides.label\') }}\n                <span :style="{\n                        fontWeight: \'normal\'\n                    }">\n                    ({{ total }})\n                </span>\n            </h2>\n        </div>\n    </template>\n\n    <template #language-switch>\n\n        <sw-language-switch \n            @on-change="onChangeLanguage" />\n\n    </template>\n\n    <template #smart-bar-actions>\n\n        <sw-button\n            variant="primary"\n            :disabled="!permissionCreate"\n            :router-link="permissionCreate === true ? { name: \'blur.elysium.slides.create\' } : null">\n            {{ $tc(\'blurElysium.action.createSlide\') }}\n        </sw-button>\n    </template>\n\n    <template #content>\n\n        <sw-entity-listing\n            v-if="total > 0"\n            :items="slidesCollection"\n            :repository="slidesRepository"\n            :columns="slidesColumns"\n            :is-loading="isLoading"\n            :sort-by="sortBy"\n            :sort-direction="sortDirection"\n            :allow-delete="permissionDelete"\n            @column-sort="columnSort"\n            @delete-item-finish="finishDeleteItems"\n            @items-delete-finish="finishDeleteItems">\n\n            <template #more-actions="{ item }">\n\n                <sw-context-menu-item\n                    :disabled="!permissionCreate"\n                    @click="copySlide(item)"\n                >\n                    {{ $tc(\'blurElysiumSlides.actions.copySlide\') }}\n                </sw-context-menu-item>\n\n                <sw-context-menu-item\n                    :disabled="!permissionView"\n                    :router-link="permissionView === true ? { name: \'blur.elysium.slides.detail\', params: { id: item.id }} : null"\n                >\n                    {{ $tc(\'blurElysiumSlides.actions.editSlide\') }}\n                </sw-context-menu-item>\n            </template>\n\n        </sw-entity-listing>\n\n        <template v-if="isLoading === false && total === 0">\n            \n            <sw-empty-state\n                :title="$tc(\'blurElysiumSlides.emptySlidesTitle\')"\n                :subline="$tc(\'blurElysiumSlides.emptySlidesSubline\')"\n                :auto-height="true"\n                :style="{\n                    minHeight: \'50vh\',\n                    padding: \'40px 20px\'\n                }">\n\n                <template #icon>\n                    <img\n                        :src="assetFilter(\'/administration/static/img/empty-states/media-empty-state.svg\')"\n                        :alt="$tc(\'blurElysiumSlides.emptySlidesTitle\')"\n                    >\n                </template>\n\n                <template #actions>\n\n                    <sw-button\n                        :router-link="{ name: \'blur.elysium.slides.create\' }">\n                        {{ $tc(\'blurElysium.action.createSlide\') }}\n                    </sw-button>\n                </template>\n            </sw-empty-state>\n        </template>\n    </template>\n\n</sw-page>',inject:["repositoryFactory","acl"],setup(){return{module:s.b}},data(){return{slidesCollection:{},slidesColumns:[{property:"name",dataIndex:"name",inlineEdit:"string",label:"blurElysiumSlides.grid.nameLabel",routerLink:"blur.elysium.slides.detail",width:"250px",allowResize:!0,primary:!0,useCustomSort:!0,naturalSorting:!0},{property:"title",dataIndex:"title",inlineEdit:"string",label:"blurElysiumSlides.grid.headlineLabel",routerLink:"blur.elysium.slides.detail",width:"1fr",allowResize:!0,sortable:!1,primary:!1,useCustomSort:!1,naturalSorting:!1}],isLoading:!0,searchTerm:this.$route.query?.term?this.$route.query.term:"",sortBy:"createdAt",sortDirection:"DESC",styles:{moduleHeading:{display:"flex",gap:"16px",alignItems:"center"}}}},mixins:[l.getByName("notification"),l.getByName("listing")],metaInfo(){return{title:this.$createTitle()}},watch:{searchTerm:{handler(){this.loadSlides()}}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")},defaultCriteria(){let e=new d(this.page,this.limit);return e.setTerm(this.searchTerm),e.addSorting(d.sort(this.sortBy,this.sortDirection,!0)),e},permissionView(){return this.acl.can("blur_elysium_slides.viewer")},permissionCreate(){return this.acl.can("blur_elysium_slides.creator")},permissionEdit(){return this.acl.can("blur_elysium_slides.editor")},permissionDelete(){return this.acl.can("blur_elysium_slides.deleter")},assetFilter(){return o.getByName("asset")}},methods:{loadSlides(){this.isLoading=!0,this.slidesRepository.search(this.defaultCriteria,m.api).then(e=>{this.slidesCollection=e,this.total="number"==typeof e.total?e.total:0,this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1})},onSearch(e){this.searchTerm=e},onChangeLanguage(e){a.commit("context/setApiLanguageId",e),this.isLoading=!0,this.loadSlides()},columnSort(){this.loadSlides()},copySlide(e){if(!0!==this.permissionCreate)return;this.isLoading=!0;let t={overwrites:{name:`${e.name}-${this.$tc("blurElysium.general.copySuffix")}`}};this.slidesRepository.clone(e.id,t).then(()=>{this.loadSlides()}).catch(e=>{console.warn(e),this.isLoading=!1})},finishDeleteItems(){this.createNotificationSuccess({message:this.$tc("blurElysiumSlides.messages.slideDeleteSucces")}),this.isLoading=!1,this.loadSlides()}},created(){this.loadSlides(),console.log(this)}})}}]);