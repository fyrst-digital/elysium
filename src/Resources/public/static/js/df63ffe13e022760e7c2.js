(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[9196],{5726:function(){},9196:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return i}}),o(1663);let{Component:l,State:s,Mixin:c}=Shopware,r={mobile:{colStart:"auto",colEnd:12,rowStart:"auto",rowEnd:"auto"},"tablet-landscape":{colStart:"auto",colEnd:6,rowStart:"auto",rowEnd:"auto"},desktop:{colStart:"auto",colEnd:3,rowStart:"auto",rowEnd:"auto"}};var i=l.wrapComponentConfig({template:'<blur-elysium-cms-section-add-block \n    :key="0"\n    v-droppable="{ dragGroup: \'cms-stage\', data: getDropData(0), onDrop: block => dropBlock(block, 0) }" />\n\n<div :style="gridStyle"\n    ref="elysiumectionGrid"\n    @dragover.prevent \n    @drop="onGridDrop">\n\n    <template\n        v-for="(block, index) in section.blocks"\n        :key="block.id">\n        \n        <sw-cms-block\n            ref="elysiumStageBlock"\n            :class="[\'sw-cms-stage-block\', \'blur-elysium-section-block\']"\n            :block="block"\n            :disabled="disabled"\n            :active="cmsPageState.selectedBlock !== null && cmsPageState.selectedBlock.id === block.id"\n            :has-errors="hasBlockErrors(block)"\n            :style="setBlockStyles(block)"\n            @block-overlay-click="onBlockSelection(block)"\n        >\n            <div class="blur-elysium-section-block-resizer" \n                draggable="true" \n                @dragstart="$event => startBlockResizeX($event, block, index)"\n                @dragend="endBlockResizeX"\n                @drag="dragBlockResizingX" />\n\n            <component\n                :is="`sw-cms-block-${block.type}`"\n                :block="block">\n                \n\n                <template\n                    v-for="el in block.slots"\n                    :key="el.id"\n                    #[el.slot]\n                >\n                    <sw-cms-slot\n                        :element="el"\n                        :active="cmsPageState.selectedBlock !== null && cmsPageState.selectedBlock.id === block.id"\n                    />\n                </template>\n\n            </component>\n\n        </sw-cms-block>\n\n    </template>\n\n</div>',props:["section"],inject:["cmsService"],mixins:[c.getByName("cms-state")],data(){return{draggedBlock:null,draggedBlockStartPosX:0,draggedBlockWidth:0}},computed:{cmsPageState(){return s.get("cmsPageState")},currentDevice(){return this.cmsPageState.currentCmsDeviceView},gridStyle(){return{display:"grid",gridTemplateColumns:"repeat(12, minmax(0, 1fr))",gap:"24px",alignItems:"stretch"}}},methods:{getDropData(e,t="main"){return{dropIndex:e,section:this.section,sectionPosition:t}},dropBlock(e,t){this.section.blocks[t].hasOwnProperty("customFields")?this.section.blocks[t].customFields.elysiumBlockSettings=structuredClone(r):this.section.blocks[t].customFields={elysiumBlockSettings:structuredClone(r)},console.log("dropBlock",t,this.section.blocks[t],e)},setBlockStyles(e){let t={};return e.customFields&&e.customFields.elysiumBlockSettings&&(t["--blur-elysium-section-block-col-start"]=e.customFields.elysiumBlockSettings[this.currentDevice].colStart,t["--blur-elysium-section-block-col-end"]=e.customFields.elysiumBlockSettings[this.currentDevice].colEnd,t["--blur-elysium-section-block-row-start"]=e.customFields.elysiumBlockSettings[this.currentDevice].rowStart,t["--blur-elysium-section-block-row-end"]=e.customFields.elysiumBlockSettings[this.currentDevice].rowEnd),t},hasBlockErrors(e){return[this.hasUniqueBlockErrors(e),this.hasSlotConfigErrors(e)].some(e=>!!e)},hasUniqueBlockErrors(e){let t=this.pageSlotsError?.parameters?.elements;return!!t&&t.some(t=>t.blockIds.includes(e.id))},hasSlotConfigErrors(e){let t=this.pageSlotConfigError?.parameters?.elements;return!!t&&t.some(t=>t.blockId===e.id)},onBlockSelection(e){Shopware.Store.get("cmsPageState").setBlock(e),this.$emit("page-config-open","itemConfig")},onGridDrop(e){this.draggedBlock.customFields.elysiumBlockSettings[this.currentDevice].colEnd=this.calculateDraggedBlockColWidth(e.x)},startBlockResizeX(e,t,o){this.draggedBlock=t,this.draggedBlockStartPosX=e.x,this.draggedBlockWidth=e.target.offsetParent.offsetWidth;let l=new Image;l.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(l,0,0)},endBlockResizeX(e){this.calculateDraggedBlockColWidth(e.x)>=12&&(this.draggedBlock.customFields.elysiumBlockSettings[this.currentDevice].colEnd=12)},dragBlockResizingX(e){this.calculateDraggedBlockColWidth(e.x)>0&&12>=this.calculateDraggedBlockColWidth(e.x)&&(this.draggedBlock.customFields.elysiumBlockSettings[this.currentDevice].colEnd=this.calculateDraggedBlockColWidth(e.x))},calculateDraggedBlockColWidth(e){return Math.round((this.draggedBlockWidth+(e-this.draggedBlockStartPosX))/(this.$refs.elysiumectionGrid.offsetWidth/12))}},created(){console.log(this)}})},1663:function(e,t,o){var l=o(5726);l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals),o(5346).Z("1adfd2e4",l,!0,{})}}]);