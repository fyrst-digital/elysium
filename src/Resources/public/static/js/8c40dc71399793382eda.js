"use strict";(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[1197],{1197:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var s={slide:{headline:{color:null,element:"div"},description:{color:null},linking:{type:"custom",buttonAppearance:"primary",openExternal:!1,overlay:!1},cover:{mobileFirst:!1},bgColor:null,bgGradient:{startColor:"",endColor:"",gradientType:"linear-gradient",gradientDeg:45},cssClass:null},container:{bgColor:null,bgEffect:{blur:"8px"}},viewports:{mobile:{container:{paddingX:15,paddingY:15,borderRadius:0,maxWidth:0,maxWidthDisabled:!0,gap:20,justifyContent:"normal",alignItems:"center",columnWrap:!0,order:"default"},content:{paddingX:0,paddingY:0,maxWidth:0,maxWidthDisabled:!0,textAlign:"left"},image:{justifyContent:"center",maxWidth:0,maxWidthDisabled:!0,imageFullWidth:!1},slide:{paddingX:15,paddingY:15,borderRadius:0,alignItems:"center",justifyContent:"center"},coverImage:{objectPosX:"center",objectPosY:"center",objectFit:"cover"},coverVideo:{objectPosX:"center",objectPosY:"center",objectFit:"cover"},headline:{fontSize:20},description:{fontSize:14},button:{size:"sm"}},tablet:{container:{paddingX:15,paddingY:15,borderRadius:0,maxWidth:0,maxWidthDisabled:!0,gap:20,justifyContent:"normal",alignItems:"center",columnWrap:!1,order:"default"},content:{paddingX:0,paddingY:0,maxWidth:0,maxWidthDisabled:!0,textAlign:"left"},image:{justifyContent:"center",maxWidth:0,maxWidthDisabled:!0,imageFullWidth:!1},slide:{paddingX:15,paddingY:15,borderRadius:0,alignItems:"center",justifyContent:"center"},coverImage:{objectPosX:"center",objectPosY:"center",objectFit:"cover"},coverVideo:{objectPosX:"center",objectPosY:"center",objectFit:"cover"},headline:{fontSize:24},description:{fontSize:16},button:{size:"default"}},desktop:{container:{paddingX:15,paddingY:15,borderRadius:0,maxWidth:0,maxWidthDisabled:!0,gap:20,justifyContent:"normal",alignItems:"center",columnWrap:!1,order:"default"},content:{paddingX:0,paddingY:0,maxWidth:0,maxWidthDisabled:!0,textAlign:"left"},image:{justifyContent:"center",maxWidth:0,maxWidthDisabled:!0,imageFullWidth:!1},slide:{paddingX:15,paddingY:15,borderRadius:0,alignItems:"center",justifyContent:"center"},coverImage:{objectPosX:"center",objectPosY:"center",objectFit:"cover"},coverVideo:{objectPosX:"center",objectPosY:"center",objectFit:"cover"},headline:{fontSize:32},description:{fontSize:20},button:{size:"lg"}}},slideTemplate:"default",customTemplateFile:null};let{Component:n,State:a,Context:l,Mixin:d,Data:o,Utils:r}=Shopware,{Criteria:m}=o,{mapMutations:c,mapState:u}=n.getComponentHelper();var h=n.wrapComponentConfig({template:'<sw-page>\n\n    <template #smart-bar-header>\n        <h2>\n            {{ metaTitle }}\n        </h2>\n    </template>\n\n    <template #language-switch>\n\n        <sw-language-switch\n            :save-changes-function="saveOnLanguageChange"\n            :abort-change-function="abortOnLanguageChange"\n            :disabled="newSlide === true"\n            @on-change="onChangeLanguage"\n        />\n    </template>\n\n    <template #smart-bar-actions>\n\n        <sw-button\n            :disabled="(newSlide !== true && !hasChanges)"\n            v-tooltip="{\n                message: cancelActionMessage\n            }"\n            @click="cancelAction">\n            {{ $tc(\'sw-customer.detail.buttonCancel\') }}\n        </sw-button>\n\n        <sw-button-group\n            :split-button="true">\n\n            <sw-button-process\n                :is-loading="isLoading"\n                :disabled="false"\n                variant="primary"\n                @click.prevent="saveSlide"\n            >\n                {{ $tc(\'sw-customer.detail.buttonSave\') }}\n            </sw-button-process>\n\n            <sw-context-button\n                v-if="newSlide !== true">\n\n                <template #button>\n                    <sw-button\n                        square\n                        variant="primary"\n                        :disabled="isLoading"\n                    >\n                        <blur-icon\n                            name="blurph-caret-down-bold"\n                            size="24"\n                        />\n                    </sw-button>\n                </template>\n\n                <sw-context-menu-item\n                    :disabled="false"\n                    @click="onCopySlide">\n                    {{ $tc(\'blurElysiumSlides.actions.copySlide\') }}\n                </sw-context-menu-item>\n\n                <sw-context-menu-item\n                    variant="danger"\n                    :disabled="false"\n                    @click="showDeleteModal = true">\n                    {{ $tc(\'blurElysiumSlides.actions.deleteSlide\') }}\n                </sw-context-menu-item>\n\n            </sw-context-button>\n\n        </sw-button-group>\n    </template>\n\n    <template #content>\n\n        <blur-elysium-slides-detail-view \n            v-if="slide">\n\n            <template #start>\n\n                <blur-device-switch \n                    :default-viewport="deviceView"\n                    @change-viewport="viewportChanged" />\n\n            </template>\n\n            <template #content>\n            \n                <sw-tabs\n                    position-identifier="positionIdentifiers.placeholder">\n\n                    <sw-tabs-item\n                        :route="contentRoute"\n                        :title="$tc(\'blurElysiumSlides.settings.baseLabel\')">\n                        {{ $tc(\'blurElysiumSlides.settings.baseLabel\') }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item\n                        :route="mediaRoute"\n                        :title="$tc(\'blurElysiumSlides.settings.mediaLabel\')">\n                        {{ $tc(\'blurElysiumSlides.settings.mediaLabel\') }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item\n                        :route="displayRoute"\n                        :title="$tc(\'blurElysiumSlides.settings.displayLabel\')">\n                        {{ $tc(\'blurElysiumSlides.settings.displayLabel\') }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item\n                        :route="advancedRoute"\n                        :title="$tc(\'blurElysiumSlides.settings.advancedLabel\')">\n                        {{ $tc(\'blurElysiumSlides.settings.advancedLabel\') }}\n                    </sw-tabs-item>\n\n                    <template #content>\n                        <router-view />\n                    </template>\n                </sw-tabs>\n\n            </template>\n            \n        </blur-elysium-slides-detail-view>\n\n        <sw-confirm-modal \n            v-if="showDeleteModal === true" \n            type="delete"\n            :title="$tc(\'blurElysiumSlides.actions.deleteSlide\')"\n            :text="$tc(\'blurElysiumSlides.messages.slideDeleteConfirm\')"\n            @confirm="deleteSlide"\n            @cancel="showDeleteModal = false"\n            @close="showDeleteModal = false" />\n\n    </template>\n\n    <template #sidebar>\n\n        <sw-sidebar \n            :propagate-width="true">\n\n            <sw-sidebar-media-item \n                :ref="(el) => { setMediaSidebar(el) }">\n\n                <template #context-menu-items="media">\n                    \n                    <sw-context-menu-item \n                        v-if="mediaType(media.mediaItem.mimeType) === \'image\'"\n                        @click="setSlideCoverImage(media.mediaItem)">\n                        {{ $tc(\'blurElysiumSlides.forms.useMediaAsSlideCover\') }}\n                    </sw-context-menu-item>\n\n                    <sw-context-menu-item \n                        v-if="mediaType(media.mediaItem.mimeType) === \'video\'"\n                        @click="setSlideCoverVideo(media.mediaItem)">\n                        {{ $tc(\'blurElysiumSlides.forms.useMediaAsSlideCover\') }}\n                    </sw-context-menu-item>\n\n                    <sw-context-menu-item \n                        v-if="mediaType(media.mediaItem.mimeType) === \'image\'"\n                        @click="setFocusImage(media.mediaItem)">\n                        {{ $tc(\'blurElysiumSlides.forms.useMediaAsFocusImage\') }}\n                    </sw-context-menu-item>\n\n                </template>\n\n            </sw-sidebar-media-item>\n\n        </sw-sidebar>\n    </template>\n\n</sw-page>',inject:["repositoryFactory"],mixins:[d.getByName("placeholder"),d.getByName("notification")],props:{newSlide:{type:Boolean,required:!0,default:!1},slideId:{type:String,required:!1,default:null}},watch:{newSlide(e){!0===e&&this.createSlide()},slideId(){this.loadSlide()},slide:{handler:function(e){this.hasChanges=this.slidesRepository.hasChanges(e)},deep:!0}},metaInfo(){return{title:this.$createTitle(this.metaTitle)}},data(){return{defaultSlideSettings:structuredClone(s),showDeleteModal:!1,isLoading:!0,isSaved:!1,hasChanges:!1}},computed:{...u("blurElysiumSlide",["slide","deviceView"]),contentRoute(){return!1===this.newSlide?{name:"blur.elysium.slides.detail.content",params:{id:this.slideId}}:{name:"blur.elysium.slides.create.content"}},mediaRoute(){return!1===this.newSlide?{name:"blur.elysium.slides.detail.media",params:{id:this.slideId}}:{name:"blur.elysium.slides.create.media"}},displayRoute(){return!1===this.newSlide?{name:"blur.elysium.slides.detail.display",params:{id:this.slideId}}:{name:"blur.elysium.slides.create.display"}},advancedRoute(){return!1===this.newSlide?{name:"blur.elysium.slides.detail.advanced",params:{id:this.slideId}}:{name:"blur.elysium.slides.create.advanced"}},slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")},customFieldSetRepository(){return this.repositoryFactory.create("custom_field_set")},customFieldSetCriteria(){let e=new m;return e.addFilter(m.equals("relations.entityName","blur_elysium_slides")),e.getAssociation("customFields").addSorting(m.sort("config.customFieldPosition")),e},cancelActionMessage(){return!0===this.newSlide?this.$tc("blurElysiumSlides.messages.cancelSlideCreation"):this.$tc("blurElysiumSlides.messages.cancelSlideChanges")},metaTitle(){return this.placeholder(this.slide,"name",this.$tc("blurElysiumSlides.actions.newSlide"))}},methods:{...c("blurElysiumSlide",["setSlide","setSlideProperty","setCustomFieldSet","setMediaSidebar","setDeviceView"]),createSlide(){a.commit("context/resetLanguageToDefault");let e=this.slidesRepository.create(l.api);Object.assign(e,{slideSettings:this.defaultSlideSettings}),this.setSlide(e),this.isLoading=!1},deleteSlide(){this.isLoading=!0,this.slidesRepository.delete(this.slideId,l.api).then(()=>{this.$emit("delete-finish"),this.$router.push({name:"blur.elysium.slides.overview"})}).catch(e=>{console.error(e)})},loadSlide(){this.slidesRepository.get(this.slideId,l.api,new m).then(e=>{let t=r.object.deepMergeObject(this.defaultSlideSettings,e.slideSettings);e.slideSettings=t,this.setSlide(e)}).catch(e=>{console.warn(e)}),this.isLoading=!1},loadCustomFieldSets(){this.customFieldSetRepository.search(this.customFieldSetCriteria,l.api).then(e=>{this.setCustomFieldSet(e)}).catch(e=>{console.warn(e)})},viewportChanged(e){this.setDeviceView(e)},overviewPush(){this.$router.push({name:"blur.elysium.slides.overview"})},detailPush(e){this.$router.push({name:"blur.elysium.slides.detail",params:{id:e}})},async saveSlide(){this.isLoading=!0,this.slidesRepository.save(this.slide).then(e=>{this.createNotificationSuccess({message:this.$t("blurElysiumSlides.messages.slideSavedSuccess",{slide:this.slide.name})}),!0===this.newSlide?this.detailPush(JSON.parse(e.config.data).id):this.loadSlide(),this.isLoading=!1}).catch(e=>{void 0===this.slide.name||null===this.slide.name||""===this.slide.name?this.createNotificationError({title:this.$tc("blurElysiumSlides.messages.emptySlideNameErrorTitle"),message:this.$tc("blurElysiumSlides.messages.emptySlideNameError")}):this.createNotificationError({message:this.$tc("blurElysiumSlides.messages.slideSaveError")}),console.error(e),this.isLoading=!1})},cancelAction(){!0===this.newSlide?this.overviewPush():this.$router.go(0)},saveOnLanguageChange(){this.saveSlide()},abortOnLanguageChange(){return this.slidesRepository.hasChanges(this.slide)},onChangeLanguage(e){a.commit("context/setApiLanguageId",e),this.slideId&&this.loadSlide()},onCopySlide(){if(this.slidesRepository.hasChanges(this.slide)){this.createNotificationError({message:this.$tc("blurElysiumSlides.messages.copyErrorUnsavedChanges")});return}let e={overwrites:{name:`${this.slide.name}-${this.$tc("blurElysium.general.copySuffix")}`}};this.isLoading=!0,this.slidesRepository.clone(this.slide.id,e).then(e=>{this.$router.push({name:"blur.elysium.slides.detail",params:{id:e.id}})}).catch(e=>{console.warn(e)})},setSlideCoverImage(e){let t={mobile:"slideCoverMobile",tablet:"slideCoverTablet",desktop:"slideCover"};"image"===this.mediaType(e.mimeType)?(this.setSlideProperty({key:`${t[this.deviceView]}Id`,value:e.id}),this.setSlideProperty({key:t[this.deviceView],value:e})):console.warn("media must be an image")},setSlideCoverVideo(e){"video"===this.mediaType(e.mimeType)?(this.setSlideProperty({key:"slideCoverVideoId",value:e.id}),this.setSlideProperty({key:"slideCoverVideo",value:e})):console.warn("media must be an image")},setFocusImage(e){"image"===this.mediaType(e.mimeType)?(this.setSlideProperty({key:"presentationMediaId",value:e.id}),this.setSlideProperty({key:"presentationMedia",value:e})):console.warn("media must be an image")},mediaType(e){return e.split("/")[0]}},created(){!0===this.newSlide?this.createSlide():(this.loadSlide(),this.loadCustomFieldSets())}})}}]);