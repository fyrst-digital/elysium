<blur-elysium-cms-section-add-block 
    :key="0"
    v-droppable="{ dragGroup: 'cms-stage', data: getDropData(0), onDrop: block => dropBlock(block, 0) }" />

<div :style="gridStyle"
    ref="elysiumectionGrid"
    @dragover.prevent 
    @drop="onGridDrop">

    <template
        v-for="(block, index) in section.blocks"
        :key="block.id">
        
        <sw-cms-block
            ref="elysiumStageBlock"
            :class="['sw-cms-stage-block', 'blur-elysium-section-block']"
            :block="block"
            :disabled="disabled"
            :active="cmsPageState.selectedBlock !== null && cmsPageState.selectedBlock.id === block.id"
            :has-errors="hasBlockErrors(block)"
            :style="setBlockStyles(block)"
            v-droppable="{ dragGroup: 'cms-stage', data: getDropData(index + 1), onDrop: block => dropBlock(block, index + 1) }"
            @block-overlay-click="onBlockSelection(block)"
        >
            <div class="blur-elysium-section-block-resizer" 
                draggable="true" 
                @dragstart="$event => startBlockResizeX($event, block, index)"
                @dragend="endBlockResizeX"
                @drag="dragBlockResizingX" />

            <component
                :is="`sw-cms-block-${block.type}`"
                :block="block">
                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->

                <template
                    v-for="el in block.slots"
                    :key="el.id"
                    #[el.slot]
                >
                    <sw-cms-slot
                        :element="el"
                        :active="cmsPageState.selectedBlock !== null && cmsPageState.selectedBlock.id === block.id"
                    />
                </template>

            </component>

        </sw-cms-block>

    </template>

</div>