{% block blur_elysium_slides_detail_view %}
    <sw-page class="blur-slysium-slides-detail__page">

        {% block blur_elysium_slides_detail_view_smart_bar_header %}
            <template #smart-bar-header>

                {% block blur_elysium_slides_detail_view_smart_bar_header_title %}
                    <h2>
                        {{ slideLabel }}
                    </h2>
                {% endblock %}
            </template>
        {% endblock %}

        {% block blur_elysium_slides_detail_view_smart_bar_actions %}
            <template #smart-bar-actions>

                <sw-container class="blur-slysium-slides-detail__header-actions-container" columns="auto auto" gap="0 8px">

                    {% block blur_elysium_slides_detail_view_smart_bar_action_cancel %}
                        <sw-button
                            :disabled="isLoading"
                            @click="cancel"
                        >
                            {{ $tc('sw-customer.detail.buttonCancel') }}
                        </sw-button>
                    {% endblock %}

                    {% block blur_elysium_slides_detail_view_smart_bar_action_save %}

                        <sw-button-process
                            v-tooltip="{
                                message: $tc('sw-privileges.tooltip.warning'),
                                disabled: acl.can('blur_elysium_slides.editor'),
                                showOnDisabledElements: true
                            }"
                            class="sw-customer-detail__save-action"
                            :is-loading="isLoading"
                            :process-success="isSaveSuccessful"
                            :disabled="isLoading || !( acl.can('blur_elysium_slides.editor') || ( acl.can('blur_elysium_slides.creator') && isNewSlide ) )"
                            variant="primary"
                            @process-finish="saveFinish"
                            @click.prevent="onSave"
                        >
                            {{ $tc('sw-customer.detail.buttonSave') }}
                        </sw-button-process>
                    {% endblock %}
                </sw-container>
            </template>
        {% endblock %}

        {% block blur_elysium_slides_detail_view_language_switch %}
            <template slot="language-switch">
                <sw-language-switch
                    :save-changes-function="saveOnLanguageChange"
                    :abort-change-function="abortOnLanguageChange"
                    :disabled="blurElysiumSlideId === null"
                    @on-change="onChangeLanguage"
                />
            </template>
        {% endblock %}



        <template #content>

            {% block blur_elysium_slides_detail_view_custom_template_alert %}
                <sw-alert 
                    v-if="slide.slideSettings?.customTemplateFile" 
                    variant="info" 
                    appearance="default" 
                    :showIcon="true" 
                    :closable="false"
                    style="margin:0;border-radius: 0;border-width: 0 0 1px 0;"
                    >
                    <span v-html="$tc('blurElysiumSlides.slideSettings.customTemplate.hasCustomNotice')" />
                </sw-alert>
            {% endblock %}

            {% block blur_elysium_slides_detail_view_tabs %}
                <sw-tabs :small="false" default-item="content" class="blur-elysium-slider__detail-tabs">

                    {% block blur_elysium_slides_detail_view_tab_navigation %}
                        <template slot-scope="{ active }">

                            {% block blur_elysium_slides_detail_view_tab_navigation_content %}
                                <sw-tabs-item
                                    name="content"
                                    :active-tab="active">
                                    {{ $tc('blurElysiumSlides.slideSettingTabs.contentLabel') }}
                                </sw-tabs-item>
                            {% endblock %}

                            {% block blur_elysium_slides_detail_view_tab_navigation_display %}
                                <sw-tabs-item
                                    name="display"
                                    :active-tab="active">
                                    {{ $tc('blurElysiumSlides.slideSettingTabs.displayLabel') }}
                                </sw-tabs-item>
                            {% endblock %}

                            {% block blur_elysium_slides_detail_view_tab_navigation_advanced %}
                                <sw-tabs-item
                                    name="advanced"
                                    :active-tab="active">
                                    {{ $tc('blurElysiumSlides.slideSettingTabs.advancedLabel') }}
                                </sw-tabs-item>
                            {% endblock %}
                        </template>
                    {% endblock %}

                    {% block blur_elysium_slides_detail_view_tab_content %}
                        <template
                            slot="content"
                            slot-scope="{ active }">

                            {% block blur_elysium_slides_detail_view_tab_content_general %}
                                <template v-if="active === 'content'">

                                    {% block blur_elysium_slides_detail_view_basic_form %}
                                        <blur-elysium-slides-basic-form
                                            v-if="!isLoading"
                                            :is-loading="isLoading"
                                            :allow-edit="acl.can('blur_elysium_slides.editor')"
                                        />
                                    {% endblock %}


                                    {% block blur_elysium_slides_detail_view_media_form %}
                                        <blur-elysium-slides-media-form
                                            v-if="!isLoading && blurElysiumSlide"
                                            :media="media"
                                            :mediaSidebar="$refs.mediaSidebarItem"
                                            :isLoading="isLoading"
                                            :allow-edit="acl.can('blur_elysium_slides.editor')"
                                        />
                                    {% endblock %}


                                    {% block blur_elysium_slides_detail_view_card_custom_fields %}
                                        <sw-card :title="$tc('BlurElysiumSlides.customFields.cardTitle')"
                                                v-if="customFieldSets !== undefined"
                                                :isLoading="isLoading">

                                            <template v-if="currentRoute == detailRoute">

                                                <sw-custom-field-set-renderer
                                                    v-if="customFieldSets.length > 0"
                                                    :entity="slide"
                                                    :sets="customFieldSets">
                                                </sw-custom-field-set-renderer>

                                                <sw-alert v-else variant="warning" appearance="default" :showIcon="true" :closable="false">
                                                    {{ $tc('BlurElysiumSlides.customFields.emptyFieldSet') }}
                                                </sw-alert>
                                            </template>
                                            <template v-else>

                                                <sw-alert variant="info" appearance="default" :showIcon="true" :closable="false">
                                                    {{ $tc('BlurElysiumSlides.customFields.onCreateMessage') }}
                                                </sw-alert>
                                            </template>
                                        </sw-card>
                                    {% endblock %}
                                </template>
                            {% endblock %}

                            {% block blur_elysium_slides_detail_view_tab_content_display %}
                                <template v-if="active === 'display'">
                                    {% block blur_elysium_slides_detail_view_content_general_appearance %}
                                        <blur-elysium-slides-content-general-appearance
                                            v-if="!isLoading"
                                            :isLoading="isLoading"
                                            :allow-edit="acl.can('blur_slides_elysium.editor')"
                                        />
                                    {% endblock %}
                                    {% block blur_elysium_slides_detail_view_content_container_form %}
                                        <blur-elysium-slides-content-container-settings
                                            v-if="!isLoading"
                                            :isLoading="isLoading"
                                            :allow-edit="acl.can('blur_slides_elysium.editor')"
                                        />
                                    {% endblock %}
                                </template>
                            {% endblock %}

                            {% block blur_elysium_slides_detail_view_tab_content_advanced %}
                                <template v-if="active === 'advanced'">

                                    <sw-card 
                                        :title="$tc('blurElysiumSlides.slideSettings.customTemplate.cardTitle')"
                                        v-if="!isLoading && slide.slideSettings"
                                        :isLoading="isLoading">
                                        <p 
                                            v-html="$tc('blurElysiumSlides.slideSettings.customTemplate.cardDescription')" 
                                            style="margin-bottom:1rem;" />
                                        <sw-text-field 
                                            v-model="slide.slideSettings.customTemplateFile"
                                            :placeholder="'my-own-slide'" 
                                            style="margin-bottom:1rem;" />
                                        <div 
                                            v-if="slide.slideSettings.customTemplateFile"
                                            v-html="$t('blurElysiumSlides.slideSettings.customTemplate.customTemplatePath', { file: slide.slideSettings.customTemplateFile } )" />
                                    </sw-card>
                                </template>
                            {% endblock %}

                        </template>
                    {% endblock %}

                </sw-tabs>
            {% endblock %}
        </template>

        {% block blur_elysium_slides_detail_view_sidebar %}
            <template slot="sidebar">
                <sw-sidebar :propagate-width="true">

                    {% block blur_elysium_slides_detail_view_sidebar_media_selection %}
                        <sw-sidebar-media-item ref="mediaSidebarItem">
                            <template
                                slot="context-menu-items"
                                slot-scope="media"
                            >
                                <sw-context-menu-item @click="setMedia(media.mediaItem.id, 'slideCover')">
                                    {{ $tc('BlurElysiumSlides.mediaForm.useAsCover') }}
                                </sw-context-menu-item>
                                <sw-context-menu-item @click="setMedia(media.mediaItem.id, 'slideCoverPortrait')">
                                    {{ $tc('BlurElysiumSlides.mediaForm.useAsCoverPortrait') }}
                                </sw-context-menu-item>
                            </template>
                        </sw-sidebar-media-item>
                    {% endblock %}
                </sw-sidebar>
            </template>
        {% endblock %}
    </sw-page>
{% endblock %}